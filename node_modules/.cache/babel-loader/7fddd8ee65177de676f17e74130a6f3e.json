{"ast":null,"code":"import _defineProperty from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _toConsumableArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useCallback,useMemo}from'react';import{useTranslation}from'react-i18next';import{Tag}from'@app/components/common/Tag/Tag';import{AuthorValidator,TitleValidator,DatesValidator,TagsValidator}from'../Validator';import{useResponsive}from'@app/hooks/useResponsive';import{newsTags as defaultTags}from'@app/constants/newsTags';import{Dates}from'@app/constants/Dates';import*as S from'./NewsFilter.styles';import{Dropdown}from'@app/components/common/Dropdown/Dropdown';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Filter=function Filter(_ref){var author=_ref.author,title=_ref.title,newsTagData=_ref.newsTagData,onTagClick=_ref.onTagClick,selectedTagsIds=_ref.selectedTagsIds,selectedTags=_ref.selectedTags,dates=_ref.dates,onApply=_ref.onApply,onReset=_ref.onReset,updateFilteredField=_ref.updateFilteredField;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useResponsive=useResponsive(),mobileOnly=_useResponsive.mobileOnly;var applyFilter=function applyFilter(){onApply();};var resetFilter=function resetFilter(){onReset();};return/*#__PURE__*/_jsxs(S.FilterWrapper,{children:[!mobileOnly&&/*#__PURE__*/_jsx(S.FilterTitle,{children:t('newsFeed.filter')}),/*#__PURE__*/_jsxs(S.InputWrapper,{children:[/*#__PURE__*/_jsx(S.SearchIcon,{}),/*#__PURE__*/_jsx(S.Input,{placeholder:t('newsFeed.authorSearch'),value:author,onChange:function onChange(event){return updateFilteredField('author',event.target.value);}})]}),/*#__PURE__*/_jsxs(S.InputWrapper,{children:[/*#__PURE__*/_jsx(S.SearchIcon,{}),/*#__PURE__*/_jsx(S.Input,{placeholder:t('newsFeed.titleSearch'),value:title,onChange:function onChange(event){return updateFilteredField('title',event.target.value);}})]}),/*#__PURE__*/_jsx(Dropdown,{placement:\"bottomCenter\",trigger:['click'],overlay:/*#__PURE__*/_jsxs(S.TagPopover,{children:[newsTagData.map(function(tag){return/*#__PURE__*/_jsxs(S.TagPopoverLine,{onClick:function onClick(e){onTagClick(tag);e.stopPropagation();},children:[/*#__PURE__*/_jsx(S.PopoverCheckbox,{checked:selectedTagsIds.includes(tag.id)}),/*#__PURE__*/_jsx(Tag,{title:tag.title,bgColor:tag.bgColor})]},tag.id);}),/*#__PURE__*/_jsx(S.ClosePopoverWrapper,{children:/*#__PURE__*/_jsx(S.ClosePopover,{})})]}),children:/*#__PURE__*/_jsxs(S.AddTagWrapper,{children:[/*#__PURE__*/_jsx(S.PlusIcon,{}),/*#__PURE__*/_jsx(S.AddTagText,{children:t('newsFeed.tag')})]})}),!!selectedTags.length&&/*#__PURE__*/_jsx(S.TagsWrapper,{children:selectedTags.map(function(tag){return/*#__PURE__*/_jsx(Tag,{title:tag.title,bgColor:tag.bgColor,removeTag:function removeTag(){return onTagClick(tag);}},tag.id);})}),/*#__PURE__*/_jsxs(S.DateLabels,{children:[/*#__PURE__*/_jsx(S.DateLabel,{children:t('newsFeed.from')}),/*#__PURE__*/_jsx(S.DateLabel,{children:t('newsFeed.to')})]}),/*#__PURE__*/_jsx(S.RangePicker,{dropdownClassName:\"range-picker\",value:dates,onChange:function onChange(dates){return updateFilteredField('dates',[dates!==null&&dates!==void 0&&dates.length?dates[0]:null,dates!==null&&dates!==void 0&&dates.length?dates[1]:null]);}}),/*#__PURE__*/_jsxs(S.BtnWrapper,{children:[/*#__PURE__*/_jsx(S.Btn,{onClick:function onClick(){return resetFilter();},children:t('newsFeed.reset')}),/*#__PURE__*/_jsx(S.Btn,{onClick:function onClick(){return applyFilter();},type:\"primary\",children:t('newsFeed.apply')})]})]});};export var NewsFilter=function NewsFilter(_ref2){var news=_ref2.news,newsTags=_ref2.newsTags,children=_ref2.children;var _useState=useState({author:'',title:'',selectedTags:[],dates:[null,null]}),_useState2=_slicedToArray(_useState,2),filterFields=_useState2[0],setFilterFields=_useState2[1];var author=filterFields.author,title=filterFields.title,selectedTags=filterFields.selectedTags,dates=filterFields.dates;var _useState3=useState(news),_useState4=_slicedToArray(_useState3,2),filteredNews=_useState4[0],setFilteredNews=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),overlayVisible=_useState6[0],setOverlayVisible=_useState6[1];var _useResponsive2=useResponsive(),mobileOnly=_useResponsive2.mobileOnly;var _useTranslation2=useTranslation(),t=_useTranslation2.t;var newsTagData=Object.values(newsTags||defaultTags);var selectedTagsIds=useMemo(function(){return selectedTags.map(function(item){return item.id;});},[selectedTags]);var onTagClick=useCallback(function(tag){var isExist=selectedTagsIds.includes(tag.id);if(isExist){setFilterFields(_objectSpread(_objectSpread({},filterFields),{},{selectedTags:selectedTags.filter(function(item){return item.id!==tag.id;})}));}else{setFilterFields(_objectSpread(_objectSpread({},filterFields),{},{selectedTags:[].concat(_toConsumableArray(selectedTags),[tag])}));}},[selectedTags,selectedTagsIds,filterFields]);var filterNews=useCallback(function(){var isReset=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var updatedNews=_toConsumableArray(news);if((author||title||dates[0]||selectedTags.length)&&!isReset){updatedNews=news.filter(function(post){var postAuthor=post.author.toLowerCase();var enteredAuthor=author.toLowerCase();var postTitle=post.title.toLowerCase();var enteredTitle=title.toLowerCase();var postTags=post.tags;var postDate=Dates.getDate(post.date);var fieldsValidators=[new AuthorValidator(postAuthor,enteredAuthor),new TitleValidator(postTitle,enteredTitle),new DatesValidator(postDate,dates),new TagsValidator(postTags,selectedTags)];return fieldsValidators.map(function(validator){return validator.validate();}).every(function(i){return i;});});}setFilteredNews(updatedNews.sort(function(a,b){return b.date-a.date;}));},[news,author,title,dates,selectedTags]);useEffect(function(){setFilteredNews(news);filterNews(false);// TODO AT-183\n// eslint-disable-next-line\n},[news]);var handleClickApply=useCallback(function(){filterNews(false);if(mobileOnly){setOverlayVisible(false);}},[mobileOnly,filterNews]);var handleClickReset=useCallback(function(){setFilterFields({author:'',title:'',dates:[null,null],selectedTags:[]});filterNews(true);if(mobileOnly){setOverlayVisible(false);}},[filterNews,setFilterFields,mobileOnly]);var updateFilteredField=function updateFilteredField(field,value){setFilterFields(_objectSpread(_objectSpread({},filterFields),{},_defineProperty({},field,value)));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(S.TitleWrapper,{children:mobileOnly&&/*#__PURE__*/_jsx(Dropdown,{placement:\"bottomLeft\",trigger:['click'],visible:overlayVisible,onVisibleChange:function onVisibleChange(visible){return setOverlayVisible(visible);},overlay:/*#__PURE__*/_jsx(Filter,{author:author,title:title,newsTagData:newsTagData,onTagClick:onTagClick,selectedTagsIds:selectedTagsIds,selectedTags:selectedTags,dates:dates,onApply:handleClickApply,onReset:handleClickReset,updateFilteredField:updateFilteredField}),children:/*#__PURE__*/_jsx(S.FilterButton,{children:t('newsFeed.filter')})})}),/*#__PURE__*/_jsxs(S.ContentWrapper,{children:[/*#__PURE__*/_jsx(S.NewsWrapper,{children:children({filteredNews:filteredNews||news})}),!mobileOnly&&/*#__PURE__*/_jsx(Filter,{author:author,title:title,newsTagData:newsTagData,onTagClick:onTagClick,selectedTagsIds:selectedTagsIds,selectedTags:selectedTags,dates:dates,onApply:handleClickApply,onReset:handleClickReset,updateFilteredField:updateFilteredField})]})]});};","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","useTranslation","Tag","AuthorValidator","TitleValidator","DatesValidator","TagsValidator","useResponsive","newsTags","defaultTags","Dates","S","Dropdown","Filter","author","title","newsTagData","onTagClick","selectedTagsIds","selectedTags","dates","onApply","onReset","updateFilteredField","t","mobileOnly","applyFilter","resetFilter","event","target","value","map","tag","e","stopPropagation","includes","id","bgColor","length","NewsFilter","news","children","filterFields","setFilterFields","filteredNews","setFilteredNews","overlayVisible","setOverlayVisible","Object","values","item","isExist","filter","filterNews","isReset","updatedNews","post","postAuthor","toLowerCase","enteredAuthor","postTitle","enteredTitle","postTags","tags","postDate","getDate","date","fieldsValidators","validator","validate","every","i","sort","a","b","handleClickApply","handleClickReset","field","visible"],"sources":["/workspace/ant-design-react-template/src/components/apps/newsFeed/NewsFilter/NewsFilter.tsx"],"sourcesContent":["import React, { ReactNode, useState, useEffect, useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { RangeValue } from 'rc-picker/lib/interface.d';\nimport { Tag, ITag } from '@app/components/common/Tag/Tag';\nimport { AuthorValidator, TitleValidator, DatesValidator, TagsValidator } from '../Validator';\nimport { useResponsive } from '@app/hooks/useResponsive';\nimport { newsTags as defaultTags } from '@app/constants/newsTags';\nimport { AppDate, Dates } from '@app/constants/Dates';\nimport { Post } from '@app/api/news.api';\nimport * as S from './NewsFilter.styles';\nimport { Dropdown } from '@app/components/common/Dropdown/Dropdown';\n\ninterface NewsFilterProps {\n  news: Post[];\n  newsTags?: ITag[];\n  children: ({ filteredNews }: { filteredNews: Post[] }) => ReactNode;\n}\n\ninterface Filter {\n  author: string;\n  title: string;\n  newsTagData: ITag[];\n  onTagClick: (tag: ITag) => void;\n  selectedTagsIds: Array<string>;\n  selectedTags: ITag[];\n  dates: [AppDate | null, AppDate | null];\n  updateFilteredField: (field: string, value: [AppDate | null, AppDate | null] | string) => void;\n  onApply: () => void;\n  onReset: () => void;\n}\n\nconst Filter: React.FC<Filter> = ({\n  author,\n  title,\n  newsTagData,\n  onTagClick,\n  selectedTagsIds,\n  selectedTags,\n  dates,\n  onApply,\n  onReset,\n  updateFilteredField,\n}) => {\n  const { t } = useTranslation();\n  const { mobileOnly } = useResponsive();\n\n  const applyFilter = () => {\n    onApply();\n  };\n\n  const resetFilter = () => {\n    onReset();\n  };\n\n  return (\n    <S.FilterWrapper>\n      {!mobileOnly && <S.FilterTitle>{t('newsFeed.filter')}</S.FilterTitle>}\n\n      <S.InputWrapper>\n        <S.SearchIcon />\n        <S.Input\n          placeholder={t('newsFeed.authorSearch')}\n          value={author}\n          onChange={(event) => updateFilteredField('author', event.target.value)}\n        />\n      </S.InputWrapper>\n\n      <S.InputWrapper>\n        <S.SearchIcon />\n        <S.Input\n          placeholder={t('newsFeed.titleSearch')}\n          value={title}\n          onChange={(event) => updateFilteredField('title', event.target.value)}\n        />\n      </S.InputWrapper>\n\n      <Dropdown\n        placement=\"bottomCenter\"\n        trigger={['click']}\n        overlay={\n          <S.TagPopover>\n            {newsTagData.map((tag: ITag) => (\n              <S.TagPopoverLine\n                key={tag.id}\n                onClick={(e) => {\n                  onTagClick(tag);\n                  e.stopPropagation();\n                }}\n              >\n                <S.PopoverCheckbox checked={selectedTagsIds.includes(tag.id)} />\n                <Tag title={tag.title} bgColor={tag.bgColor} />\n              </S.TagPopoverLine>\n            ))}\n            <S.ClosePopoverWrapper>\n              <S.ClosePopover />\n            </S.ClosePopoverWrapper>\n          </S.TagPopover>\n        }\n      >\n        <S.AddTagWrapper>\n          <S.PlusIcon />\n          <S.AddTagText>{t('newsFeed.tag')}</S.AddTagText>\n        </S.AddTagWrapper>\n      </Dropdown>\n\n      {!!selectedTags.length && (\n        <S.TagsWrapper>\n          {selectedTags.map((tag) => (\n            <Tag key={tag.id} title={tag.title} bgColor={tag.bgColor} removeTag={() => onTagClick(tag)} />\n          ))}\n        </S.TagsWrapper>\n      )}\n\n      <S.DateLabels>\n        <S.DateLabel>{t('newsFeed.from')}</S.DateLabel>\n        <S.DateLabel>{t('newsFeed.to')}</S.DateLabel>\n      </S.DateLabels>\n\n      <S.RangePicker\n        dropdownClassName=\"range-picker\"\n        value={dates}\n        onChange={(dates: RangeValue<AppDate>) =>\n          updateFilteredField('dates', [dates?.length ? dates[0] : null, dates?.length ? dates[1] : null])\n        }\n      />\n\n      <S.BtnWrapper>\n        <S.Btn onClick={() => resetFilter()}>{t('newsFeed.reset')}</S.Btn>\n        <S.Btn onClick={() => applyFilter()} type=\"primary\">\n          {t('newsFeed.apply')}\n        </S.Btn>\n      </S.BtnWrapper>\n    </S.FilterWrapper>\n  );\n};\n\nexport const NewsFilter: React.FC<NewsFilterProps> = ({ news, newsTags, children }) => {\n  const [filterFields, setFilterFields] = useState<{\n    author: string;\n    title: string;\n    selectedTags: ITag[];\n    dates: [AppDate | null, AppDate | null];\n  }>({\n    author: '',\n    title: '',\n    selectedTags: [],\n    dates: [null, null],\n  });\n  const { author, title, selectedTags, dates } = filterFields;\n  const [filteredNews, setFilteredNews] = useState<Post[]>(news);\n  const [overlayVisible, setOverlayVisible] = useState<boolean>(false);\n  const { mobileOnly } = useResponsive();\n  const { t } = useTranslation();\n\n  const newsTagData = Object.values(newsTags || defaultTags);\n  const selectedTagsIds = useMemo(() => selectedTags.map((item) => item.id), [selectedTags]);\n\n  const onTagClick = useCallback(\n    (tag: ITag) => {\n      const isExist = selectedTagsIds.includes(tag.id);\n\n      if (isExist) {\n        setFilterFields({\n          ...filterFields,\n          selectedTags: selectedTags.filter((item) => item.id !== tag.id),\n        });\n      } else {\n        setFilterFields({\n          ...filterFields,\n          selectedTags: [...selectedTags, tag],\n        });\n      }\n    },\n    [selectedTags, selectedTagsIds, filterFields],\n  );\n\n  const filterNews = useCallback(\n    (isReset = false) => {\n      let updatedNews = [...news];\n      if ((author || title || dates[0] || selectedTags.length) && !isReset) {\n        updatedNews = news.filter((post) => {\n          const postAuthor = post.author.toLowerCase();\n          const enteredAuthor = author.toLowerCase();\n          const postTitle = post.title.toLowerCase();\n          const enteredTitle = title.toLowerCase();\n          const postTags = post.tags;\n          const postDate = Dates.getDate(post.date);\n\n          const fieldsValidators = [\n            new AuthorValidator(postAuthor, enteredAuthor),\n            new TitleValidator(postTitle, enteredTitle),\n            new DatesValidator(postDate, dates),\n            new TagsValidator(postTags, selectedTags),\n          ];\n\n          return fieldsValidators.map((validator) => validator.validate()).every((i) => i);\n        });\n      }\n      setFilteredNews(\n        updatedNews.sort((a, b) => {\n          return b.date - a.date;\n        }),\n      );\n    },\n    [news, author, title, dates, selectedTags],\n  );\n\n  useEffect(() => {\n    setFilteredNews(news);\n    filterNews(false);\n    // TODO AT-183\n    // eslint-disable-next-line\n  }, [news]);\n\n  const handleClickApply = useCallback(() => {\n    filterNews(false);\n\n    if (mobileOnly) {\n      setOverlayVisible(false);\n    }\n  }, [mobileOnly, filterNews]);\n\n  const handleClickReset = useCallback(() => {\n    setFilterFields({ author: '', title: '', dates: [null, null], selectedTags: [] });\n    filterNews(true);\n\n    if (mobileOnly) {\n      setOverlayVisible(false);\n    }\n  }, [filterNews, setFilterFields, mobileOnly]);\n\n  const updateFilteredField = (field: string, value: string | [AppDate | null, AppDate | null]) => {\n    setFilterFields({ ...filterFields, [field]: value });\n  };\n\n  return (\n    <>\n      <S.TitleWrapper>\n        {mobileOnly && (\n          <Dropdown\n            placement=\"bottomLeft\"\n            trigger={['click']}\n            visible={overlayVisible}\n            onVisibleChange={(visible) => setOverlayVisible(visible)}\n            overlay={\n              <Filter\n                author={author}\n                title={title}\n                newsTagData={newsTagData}\n                onTagClick={onTagClick}\n                selectedTagsIds={selectedTagsIds}\n                selectedTags={selectedTags}\n                dates={dates}\n                onApply={handleClickApply}\n                onReset={handleClickReset}\n                updateFilteredField={updateFilteredField}\n              />\n            }\n          >\n            <S.FilterButton>{t('newsFeed.filter')}</S.FilterButton>\n          </Dropdown>\n        )}\n      </S.TitleWrapper>\n\n      <S.ContentWrapper>\n        <S.NewsWrapper>{children({ filteredNews: filteredNews || news })}</S.NewsWrapper>\n\n        {!mobileOnly && (\n          <Filter\n            author={author}\n            title={title}\n            newsTagData={newsTagData}\n            onTagClick={onTagClick}\n            selectedTagsIds={selectedTagsIds}\n            selectedTags={selectedTags}\n            dates={dates}\n            onApply={handleClickApply}\n            onReset={handleClickReset}\n            updateFilteredField={updateFilteredField}\n          />\n        )}\n      </S.ContentWrapper>\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}