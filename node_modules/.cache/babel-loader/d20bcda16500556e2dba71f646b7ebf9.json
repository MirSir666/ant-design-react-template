{"ast":null,"code":"import _defineProperty from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useCallback,useState}from'react';import{Col,Form,Row}from'antd';import{BaseButtonsForm}from'@app/components/common/forms/BaseButtonsForm/BaseButtonsForm';import{BaseButtonsGroup}from'@app/components/common/forms/components/BaseButtonsGroup/BaseButtonsGroup';import{CardNumberItem}from'@app/components/profile/profileCard/profileFormNav/nav/payments/paymentMethod/paymentForm/CardNumberItem/CardNumberItem';import{CardholderItem}from'@app/components/profile/profileCard/profileFormNav/nav/payments/paymentMethod/paymentForm/CardholderItem/CardholderItem';import{ExpDateItem}from'@app/components/profile/profileCard/profileFormNav/nav/payments/paymentMethod/paymentForm/ExpDateItem/ExpDateItem';import{CVVItem}from'@app/components/profile/profileCard/profileFormNav/nav/payments/paymentMethod/paymentForm/CVVItem/CVVItem';import{CardThemeItem}from'@app/components/profile/profileCard/profileFormNav/nav/payments/paymentMethod/paymentForm/CardThemeItem/CardThemeItem';import{cardThemes}from'@app/constants/cardThemes';import*as S from'./PaymentForm.styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var clearCardData={name:'',cvc:'',expiry:'',number:'',focused:'',background:cardThemes[0].background,isEdit:false};export var PaymentForm=function PaymentForm(_ref){var closeModal=_ref.closeModal,onFormFinish=_ref.onFormFinish;var _useState=useState(clearCardData),_useState2=_slicedToArray(_useState,2),cardData=_useState2[0],setCardData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isFieldsChanged=_useState6[0],setFieldsChanged=_useState6[1];var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var handleInputFocus=useCallback(function(event){setCardData(_objectSpread(_objectSpread({},cardData),{},{focused:event.target.name}));},[setCardData,cardData]);var onFinish=useCallback(function(values){setLoading(true);setTimeout(function(){setLoading(false);setFieldsChanged(false);var card=_objectSpread(_objectSpread({},values),{},{background:cardData.background});onFormFinish(card);setCardData(clearCardData);closeModal();form.setFieldsValue(clearCardData);},1000);},[cardData.background,closeModal,form,onFormFinish]);return/*#__PURE__*/_jsxs(BaseButtonsForm,{form:form,requiredMark:\"optional\",name:\"paymentCard\",onFinish:onFinish,footer:/*#__PURE__*/_jsx(BaseButtonsGroup,{loading:isLoading,onCancel:closeModal}),initialValues:clearCardData,onValuesChange:function onValuesChange(field){var values=Object.entries(field)[0];setCardData(_objectSpread(_objectSpread({},cardData),{},_defineProperty({},values[0],values[1])));},isFieldsChanged:isFieldsChanged,onFieldsChange:function onFieldsChange(){return setFieldsChanged(true);},children:[/*#__PURE__*/_jsx(S.PayCard,{cardData:cardData}),/*#__PURE__*/_jsxs(S.FormItemsWrapper,{children:[/*#__PURE__*/_jsx(CardNumberItem,{handleInputFocus:handleInputFocus}),/*#__PURE__*/_jsx(CardholderItem,{handleInputFocus:handleInputFocus}),/*#__PURE__*/_jsxs(Row,{gutter:[20,0],children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(ExpDateItem,{handleInputFocus:handleInputFocus})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(CVVItem,{handleInputFocus:handleInputFocus})})]}),/*#__PURE__*/_jsx(CardThemeItem,{cardData:cardData,setCardData:setCardData})]})]});};","map":{"version":3,"names":["React","useCallback","useState","Col","Form","Row","BaseButtonsForm","BaseButtonsGroup","CardNumberItem","CardholderItem","ExpDateItem","CVVItem","CardThemeItem","cardThemes","S","clearCardData","name","cvc","expiry","number","focused","background","isEdit","PaymentForm","closeModal","onFormFinish","cardData","setCardData","isLoading","setLoading","isFieldsChanged","setFieldsChanged","useForm","form","handleInputFocus","event","target","onFinish","values","setTimeout","card","setFieldsValue","field","Object","entries"],"sources":["/workspace/ant-design-react-template/src/components/profile/profileCard/profileFormNav/nav/payments/paymentMethod/paymentForm/PaymentForm/PaymentForm.tsx"],"sourcesContent":["import React, { useCallback, useState } from 'react';\nimport { Col, Form, Row } from 'antd';\nimport { BaseButtonsForm } from '@app/components/common/forms/BaseButtonsForm/BaseButtonsForm';\nimport { BaseButtonsGroup } from '@app/components/common/forms/components/BaseButtonsGroup/BaseButtonsGroup';\nimport { CardNumberItem } from '@app/components/profile/profileCard/profileFormNav/nav/payments/paymentMethod/paymentForm/CardNumberItem/CardNumberItem';\nimport { CardholderItem } from '@app/components/profile/profileCard/profileFormNav/nav/payments/paymentMethod/paymentForm/CardholderItem/CardholderItem';\nimport { ExpDateItem } from '@app/components/profile/profileCard/profileFormNav/nav/payments/paymentMethod/paymentForm/ExpDateItem/ExpDateItem';\nimport { CVVItem } from '@app/components/profile/profileCard/profileFormNav/nav/payments/paymentMethod/paymentForm/CVVItem/CVVItem';\nimport { CardThemeItem } from '@app/components/profile/profileCard/profileFormNav/nav/payments/paymentMethod/paymentForm/CardThemeItem/CardThemeItem';\nimport { CreditCard } from '@app/components/profile/profileCard/profileFormNav/nav/payments/paymentMethod/paymentForm/interfaces';\nimport { cardThemes } from '@app/constants/cardThemes';\nimport * as S from './PaymentForm.styles';\n\nexport const clearCardData: CreditCard = {\n  name: '',\n  cvc: '',\n  expiry: '',\n  number: '',\n  focused: '',\n  background: cardThemes[0].background,\n  isEdit: false,\n};\n\ninterface PaymentFormProps {\n  closeModal: () => void;\n  onFormFinish: (card: CreditCard) => void;\n}\n\nexport const PaymentForm: React.FC<PaymentFormProps> = ({ closeModal, onFormFinish }) => {\n  const [cardData, setCardData] = useState<CreditCard>(clearCardData);\n  const [isLoading, setLoading] = useState(false);\n  const [isFieldsChanged, setFieldsChanged] = useState(false);\n\n  const [form] = Form.useForm();\n\n  const handleInputFocus = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      setCardData({\n        ...cardData,\n        focused: event.target.name,\n      });\n    },\n    [setCardData, cardData],\n  );\n\n  const onFinish = useCallback(\n    (values: CreditCard) => {\n      setLoading(true);\n      setTimeout(() => {\n        setLoading(false);\n        setFieldsChanged(false);\n        const card = { ...values, background: cardData.background };\n        onFormFinish(card);\n        setCardData(clearCardData);\n        closeModal();\n        form.setFieldsValue(clearCardData);\n      }, 1000);\n    },\n    [cardData.background, closeModal, form, onFormFinish],\n  );\n\n  return (\n    <BaseButtonsForm\n      form={form}\n      requiredMark=\"optional\"\n      name=\"paymentCard\"\n      onFinish={onFinish}\n      footer={<BaseButtonsGroup loading={isLoading} onCancel={closeModal} />}\n      initialValues={clearCardData}\n      onValuesChange={(field) => {\n        const values = Object.entries(field)[0];\n\n        setCardData({ ...cardData, [values[0]]: values[1] });\n      }}\n      isFieldsChanged={isFieldsChanged}\n      onFieldsChange={() => setFieldsChanged(true)}\n    >\n      <S.PayCard cardData={cardData} />\n      <S.FormItemsWrapper>\n        <CardNumberItem handleInputFocus={handleInputFocus} />\n        <CardholderItem handleInputFocus={handleInputFocus} />\n        <Row gutter={[20, 0]}>\n          <Col span={12}>\n            <ExpDateItem handleInputFocus={handleInputFocus} />\n          </Col>\n          <Col span={12}>\n            <CVVItem handleInputFocus={handleInputFocus} />\n          </Col>\n        </Row>\n        <CardThemeItem cardData={cardData} setCardData={setCardData} />\n      </S.FormItemsWrapper>\n    </BaseButtonsForm>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}