{"ast":null,"code":"import _toConsumableArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useCallback}from'react';import{useTranslation}from'react-i18next';import{Card}from'@app/components/common/Card/Card';import{BaseChart}from'@app/components/common/charts/BaseChart';import Data from'./data.json';import{useAppSelector}from'@app/hooks/reduxHooks';import{themeObject}from'@app/styles/themes/themeVariables';import{jsx as _jsx}from\"react/jsx-runtime\";export var LineRaceChart=function LineRaceChart(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),series=_useState4[0],setSeries=_useState4[1];var rawData=JSON.parse(JSON.stringify(Data));var _useTranslation=useTranslation(),t=_useTranslation.t;var theme=useAppSelector(function(state){return state.theme.theme;});var runAnimation=useCallback(function(){var countries=['Finland','Germany','Iceland','Norway','United Kingdom'];var datasetWithFilters=[];var seriesList=[];countries.forEach(function(country){var datasetId=\"dataset_\".concat(country);datasetWithFilters.push({id:datasetId,fromDatasetId:'dataset_raw',transform:{type:'filter',config:{and:[{dimension:'Year',gte:1950},{dimension:'Country','=':country}]}}});seriesList.push({type:'line',datasetId:datasetId,showSymbol:false,name:country,endLabel:{show:true,formatter:function formatter(params){return\"\".concat(params.value[3],\": \").concat(params.value[0]);},color:themeObject[theme].textMain},labelLayout:{moveOverlap:'shiftY'},emphasis:{focus:'series'},encode:{x:'Year',y:'Income',label:['Country','Income'],itemName:'Year',tooltip:['Income']}});});setData(datasetWithFilters);setSeries(seriesList);},[theme]);useEffect(function(){setTimeout(function(){runAnimation();},200);},[runAnimation]);var option={animationDuration:10000,dataset:[{id:'dataset_raw',source:rawData}].concat(_toConsumableArray(data)),tooltip:{order:'valueDesc',trigger:'axis'},xAxis:{type:'category',nameLocation:'middle'},yAxis:{name:''},grid:{left:65,right:150,top:20,bottom:30},series:series};return/*#__PURE__*/_jsx(Card,{padding:\"0 0 1.875rem\",title:t('charts.lineRace'),children:/*#__PURE__*/_jsx(BaseChart,{option:option,height:\"24rem\"})});};","map":{"version":3,"names":["React","useState","useEffect","useCallback","useTranslation","Card","BaseChart","Data","useAppSelector","themeObject","LineRaceChart","data","setData","series","setSeries","rawData","JSON","parse","stringify","t","theme","state","runAnimation","countries","datasetWithFilters","seriesList","forEach","country","datasetId","push","id","fromDatasetId","transform","type","config","and","dimension","gte","showSymbol","name","endLabel","show","formatter","params","value","color","textMain","labelLayout","moveOverlap","emphasis","focus","encode","x","y","label","itemName","tooltip","setTimeout","option","animationDuration","dataset","source","order","trigger","xAxis","nameLocation","yAxis","grid","left","right","top","bottom"],"sources":["/workspace/ant-design-react-template/src/components/charts/LineRaceChart/LineRaceChart.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Card } from '@app/components/common/Card/Card';\nimport { BaseChart } from '@app/components/common/charts/BaseChart';\nimport Data from './data.json';\nimport { useAppSelector } from '@app/hooks/reduxHooks';\nimport { themeObject } from '@app/styles/themes/themeVariables';\n\ninterface DataRow {\n  id: string;\n  fromDatasetId: string;\n  transform: {\n    type: string;\n    config: { and: [{ dimension: string; gte: number }, { dimension: string; '=': string }] };\n  };\n}\n\ninterface SeriesRow {\n  type: string;\n  datasetId: string;\n  showSymbol: boolean;\n  name: string;\n  endLabel: {\n    show: boolean;\n    formatter: (params: { value: string }) => string;\n    color?: string;\n  };\n  labelLayout: {\n    moveOverlap: string;\n  };\n  emphasis: {\n    focus: string;\n  };\n  encode: {\n    x: string;\n    y: string;\n    label: [string, string];\n    itemName: string;\n    tooltip: [string];\n  };\n}\n\nexport const LineRaceChart: React.FC = () => {\n  const [data, setData] = useState<DataRow[]>([]);\n  const [series, setSeries] = useState<SeriesRow[]>([]);\n  const rawData = JSON.parse(JSON.stringify(Data));\n  const { t } = useTranslation();\n\n  const theme = useAppSelector((state) => state.theme.theme);\n\n  const runAnimation = useCallback(() => {\n    const countries = ['Finland', 'Germany', 'Iceland', 'Norway', 'United Kingdom'];\n    const datasetWithFilters: DataRow[] = [];\n    const seriesList: SeriesRow[] = [];\n\n    countries.forEach((country) => {\n      const datasetId = `dataset_${country}`;\n      datasetWithFilters.push({\n        id: datasetId,\n        fromDatasetId: 'dataset_raw',\n        transform: {\n          type: 'filter',\n          config: {\n            and: [\n              { dimension: 'Year', gte: 1950 },\n              { dimension: 'Country', '=': country },\n            ],\n          },\n        },\n      });\n      seriesList.push({\n        type: 'line',\n        datasetId: datasetId,\n        showSymbol: false,\n        name: country,\n        endLabel: {\n          show: true,\n          formatter: (params) => `${params.value[3]}: ${params.value[0]}`,\n          color: themeObject[theme].textMain,\n        },\n        labelLayout: {\n          moveOverlap: 'shiftY',\n        },\n        emphasis: {\n          focus: 'series',\n        },\n        encode: {\n          x: 'Year',\n          y: 'Income',\n          label: ['Country', 'Income'],\n          itemName: 'Year',\n          tooltip: ['Income'],\n        },\n      });\n    });\n    setData(datasetWithFilters);\n    setSeries(seriesList);\n  }, [theme]);\n\n  useEffect(() => {\n    setTimeout(() => {\n      runAnimation();\n    }, 200);\n  }, [runAnimation]);\n\n  const option = {\n    animationDuration: 10000,\n    dataset: [\n      {\n        id: 'dataset_raw',\n        source: rawData,\n      },\n      ...data,\n    ],\n    tooltip: {\n      order: 'valueDesc',\n      trigger: 'axis',\n    },\n    xAxis: {\n      type: 'category',\n      nameLocation: 'middle',\n    },\n    yAxis: {\n      name: '',\n    },\n    grid: {\n      left: 65,\n      right: 150,\n      top: 20,\n      bottom: 30,\n    },\n    series: series,\n  };\n\n  return (\n    <Card padding=\"0 0 1.875rem\" title={t('charts.lineRace')}>\n      <BaseChart option={option} height=\"24rem\" />\n    </Card>\n  );\n};\n"],"mappings":"4PAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,cAAc,KAAQ,eAAe,CAC9C,OAASC,IAAI,KAAQ,kCAAkC,CACvD,OAASC,SAAS,KAAQ,yCAAyC,CACnE,MAAOC,KAAI,KAAM,aAAa,CAC9B,OAASC,cAAc,KAAQ,uBAAuB,CACtD,OAASC,WAAW,KAAQ,mCAAmC,CAAC,2CAoChE,MAAO,IAAMC,cAAuB,CAAG,QAA1BA,cAAuB,EAAS,CAC3C,cAAwBT,QAAQ,CAAY,EAAE,CAAC,wCAAxCU,IAAI,eAAEC,OAAO,eACpB,eAA4BX,QAAQ,CAAc,EAAE,CAAC,yCAA9CY,MAAM,eAAEC,SAAS,eACxB,GAAMC,QAAO,CAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACX,IAAI,CAAC,CAAC,CAChD,oBAAcH,cAAc,EAAE,CAAtBe,CAAC,iBAADA,CAAC,CAET,GAAMC,MAAK,CAAGZ,cAAc,CAAC,SAACa,KAAK,QAAKA,MAAK,CAACD,KAAK,CAACA,KAAK,GAAC,CAE1D,GAAME,aAAY,CAAGnB,WAAW,CAAC,UAAM,CACrC,GAAMoB,UAAS,CAAG,CAAC,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,QAAQ,CAAE,gBAAgB,CAAC,CAC/E,GAAMC,mBAA6B,CAAG,EAAE,CACxC,GAAMC,WAAuB,CAAG,EAAE,CAElCF,SAAS,CAACG,OAAO,CAAC,SAACC,OAAO,CAAK,CAC7B,GAAMC,UAAS,mBAAcD,OAAO,CAAE,CACtCH,kBAAkB,CAACK,IAAI,CAAC,CACtBC,EAAE,CAAEF,SAAS,CACbG,aAAa,CAAE,aAAa,CAC5BC,SAAS,CAAE,CACTC,IAAI,CAAE,QAAQ,CACdC,MAAM,CAAE,CACNC,GAAG,CAAE,CACH,CAAEC,SAAS,CAAE,MAAM,CAAEC,GAAG,CAAE,IAAK,CAAC,CAChC,CAAED,SAAS,CAAE,SAAS,CAAE,GAAG,CAAET,OAAQ,CAAC,CAE1C,CACF,CACF,CAAC,CAAC,CACFF,UAAU,CAACI,IAAI,CAAC,CACdI,IAAI,CAAE,MAAM,CACZL,SAAS,CAAEA,SAAS,CACpBU,UAAU,CAAE,KAAK,CACjBC,IAAI,CAAEZ,OAAO,CACba,QAAQ,CAAE,CACRC,IAAI,CAAE,IAAI,CACVC,SAAS,CAAE,mBAACC,MAAM,kBAAQA,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,cAAKD,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,GAAE,CAC/DC,KAAK,CAAEpC,WAAW,CAACW,KAAK,CAAC,CAAC0B,QAC5B,CAAC,CACDC,WAAW,CAAE,CACXC,WAAW,CAAE,QACf,CAAC,CACDC,QAAQ,CAAE,CACRC,KAAK,CAAE,QACT,CAAC,CACDC,MAAM,CAAE,CACNC,CAAC,CAAE,MAAM,CACTC,CAAC,CAAE,QAAQ,CACXC,KAAK,CAAE,CAAC,SAAS,CAAE,QAAQ,CAAC,CAC5BC,QAAQ,CAAE,MAAM,CAChBC,OAAO,CAAE,CAAC,QAAQ,CACpB,CACF,CAAC,CAAC,CACJ,CAAC,CAAC,CACF5C,OAAO,CAACY,kBAAkB,CAAC,CAC3BV,SAAS,CAACW,UAAU,CAAC,CACvB,CAAC,CAAE,CAACL,KAAK,CAAC,CAAC,CAEXlB,SAAS,CAAC,UAAM,CACduD,UAAU,CAAC,UAAM,CACfnC,YAAY,EAAE,CAChB,CAAC,CAAE,GAAG,CAAC,CACT,CAAC,CAAE,CAACA,YAAY,CAAC,CAAC,CAElB,GAAMoC,OAAM,CAAG,CACbC,iBAAiB,CAAE,KAAK,CACxBC,OAAO,EACL,CACE9B,EAAE,CAAE,aAAa,CACjB+B,MAAM,CAAE9C,OACV,CAAC,4BACEJ,IAAI,EACR,CACD6C,OAAO,CAAE,CACPM,KAAK,CAAE,WAAW,CAClBC,OAAO,CAAE,MACX,CAAC,CACDC,KAAK,CAAE,CACL/B,IAAI,CAAE,UAAU,CAChBgC,YAAY,CAAE,QAChB,CAAC,CACDC,KAAK,CAAE,CACL3B,IAAI,CAAE,EACR,CAAC,CACD4B,IAAI,CAAE,CACJC,IAAI,CAAE,EAAE,CACRC,KAAK,CAAE,GAAG,CACVC,GAAG,CAAE,EAAE,CACPC,MAAM,CAAE,EACV,CAAC,CACD1D,MAAM,CAAEA,MACV,CAAC,CAED,mBACE,KAAC,IAAI,EAAC,OAAO,CAAC,cAAc,CAAC,KAAK,CAAEM,CAAC,CAAC,iBAAiB,CAAE,uBACvD,KAAC,SAAS,EAAC,MAAM,CAAEuC,MAAO,CAAC,MAAM,CAAC,OAAO,EAAG,EACvC,CAEX,CAAC"},"metadata":{},"sourceType":"module"}