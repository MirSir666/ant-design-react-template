{"ast":null,"code":"import _slicedToArray from\"/workspace/lightence-ant-design-react-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/workspace/lightence-ant-design-react-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/workspace/lightence-ant-design-react-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"onDelete\",\"onArchive\"];import React,{useState}from'react';import{useTranslation}from'react-i18next';import{MoreOutlined}from'@ant-design/icons';import{Dropdown}from'@app/components/common/Dropdown/Dropdown';import{Button}from'@app/components/common/buttons/Button/Button';import{ParticipantsDropdown}from'@app/components/apps/kanban/newCardForm/ParticipantsDropdown/ParticipantsDropdown';import{TagDropdown}from'@app/components/apps/kanban/newCardForm/TagDropdown/TagDropdown';import*as S from'./Card.styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditPopover=function EditPopover(_ref){var onDelete=_ref.onDelete,onArchive=_ref.onArchive,props=_objectWithoutProperties(_ref,_excluded);var _useTranslation=useTranslation(),t=_useTranslation.t;return/*#__PURE__*/_jsxs(S.CardMenu,_objectSpread(_objectSpread({selectable:false},props),{},{children:[/*#__PURE__*/_jsx(S.MenuItem,{onClick:onDelete,children:t('common.delete')},\"1\"),/*#__PURE__*/_jsx(S.MenuItem,{onClick:onArchive,children:t('kanban.archive')},\"2\")]}));};export var Card=function Card(_ref2){var style=_ref2.style,onClick=_ref2.onClick,onDelete=_ref2.onDelete,onChange=_ref2.onChange,className=_ref2.className,id=_ref2.id,title=_ref2.title,description=_ref2.description,_ref2$tags=_ref2.tags,tags=_ref2$tags===void 0?[]:_ref2$tags,_ref2$participants=_ref2.participants,participants=_ref2$participants===void 0?[]:_ref2$participants,cardDraggable=_ref2.cardDraggable,editable=_ref2.editable;var _useTranslation2=useTranslation(),t=_useTranslation2.t;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isExpanded=_useState2[0],setIsExpanded=_useState2[1];var onArrowPress=function onArrowPress(){setIsExpanded(!isExpanded);};var updateCard=function updateCard(card){onChange(_objectSpread(_objectSpread({},card),{},{id:id}));};var onDeleteCard=function onDeleteCard(){onDelete();};var updateTags=function updateTags(tags){updateCard({tags:tags});};var updateParticipants=function updateParticipants(participants){updateCard({participants:participants});};return/*#__PURE__*/_jsx(S.CardWrapper,{\"data-id\":id,onClick:onClick,style:style,className:className,children:/*#__PURE__*/_jsx(S.CollapseCard,{onChange:onArrowPress,bordered:false,defaultActiveKey:['1'],children:/*#__PURE__*/_jsxs(S.CardContent,{showArrow:false,header:/*#__PURE__*/_jsxs(S.CardHeader,{children:[/*#__PURE__*/_jsx(S.CardTitle,{draggable:cardDraggable,onClick:function onClick(e){e.stopPropagation();},children:editable?/*#__PURE__*/_jsx(S.Input,{name:\"title\",value:title,border:true,placeholder:t('kanban.title'),resize:\"vertical\",onSave:function onSave(value){return updateCard({title:value});}}):title}),/*#__PURE__*/_jsxs(S.CardRightContent,{children:[/*#__PURE__*/_jsx(Button,{noStyle:true,type:\"text\",icon:/*#__PURE__*/_jsx(S.ArrowDownIcon,{$expanded:isExpanded})}),/*#__PURE__*/_jsx(Dropdown,{overlay:/*#__PURE__*/_jsx(EditPopover,{onDelete:onDeleteCard,onArchive:onDeleteCard}),placement:\"bottomRight\",trigger:['click'],children:/*#__PURE__*/_jsx(Button,{noStyle:true,type:\"text\",icon:/*#__PURE__*/_jsx(MoreOutlined,{}),onClick:function onClick(e){e.stopPropagation();}})})]})]}),children:[/*#__PURE__*/_jsx(S.CardDetails,{children:editable?/*#__PURE__*/_jsx(S.Input,{value:description,border:true,placeholder:t('kanban.description'),resize:\"vertical\",onSave:function onSave(value){return updateCard({description:value});}}):description}),/*#__PURE__*/_jsx(S.CardFooter,{children:/*#__PURE__*/_jsx(TagDropdown,{selectedTags:tags,setSelectedTags:updateTags})}),/*#__PURE__*/_jsx(S.ParticipantsWrapper,{children:/*#__PURE__*/_jsx(ParticipantsDropdown,{selectedParticipants:participants,setSelectedParticipants:updateParticipants})})]},\"1\")})});};","map":{"version":3,"sources":["/workspace/lightence-ant-design-react-template/src/components/apps/kanban/Card/Card.tsx"],"names":["React","useState","useTranslation","MoreOutlined","Dropdown","Button","ParticipantsDropdown","TagDropdown","S","EditPopover","onDelete","onArchive","props","t","Card","style","onClick","onChange","className","id","title","description","tags","participants","cardDraggable","editable","isExpanded","setIsExpanded","onArrowPress","updateCard","card","onDeleteCard","updateTags","updateParticipants","e","stopPropagation","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { MoreOutlined } from '@ant-design/icons';\nimport { Dropdown } from '@app/components/common/Dropdown/Dropdown';\nimport { Button } from '@app/components/common/buttons/Button/Button';\nimport { ParticipantsDropdown } from '@app/components/apps/kanban/newCardForm/ParticipantsDropdown/ParticipantsDropdown';\nimport { TagDropdown } from '@app/components/apps/kanban/newCardForm/TagDropdown/TagDropdown';\nimport { CardState, Tag as ITag, Participant as IParticipant } from '@app/components/apps/kanban/interfaces';\nimport * as S from './Card.styles';\n\ninterface CardProps {\n  style: CSSStyleSheet;\n  onClick: () => void;\n  onDelete: () => void;\n  onChange: (card: CardState) => void;\n  className: string;\n  id: string | number;\n  title: string;\n  description: string;\n  tags: ITag[];\n  participants: IParticipant[];\n  cardDraggable: boolean;\n  editable: boolean;\n}\n\ninterface EditPopoverProps {\n  onDelete: () => void;\n  onArchive: () => void;\n}\n\nconst EditPopover: React.FC<EditPopoverProps> = ({ onDelete, onArchive, ...props }) => {\n  const { t } = useTranslation();\n\n  return (\n    <S.CardMenu selectable={false} {...props}>\n      <S.MenuItem key=\"1\" onClick={onDelete}>\n        {t('common.delete')}\n      </S.MenuItem>\n\n      <S.MenuItem key=\"2\" onClick={onArchive}>\n        {t('kanban.archive')}\n      </S.MenuItem>\n    </S.CardMenu>\n  );\n};\n\nexport const Card: React.FC<CardProps> = ({\n  style,\n  onClick,\n  onDelete,\n  onChange,\n  className,\n  id,\n  title,\n  description,\n  tags = [],\n  participants = [],\n  cardDraggable,\n  editable,\n}) => {\n  const { t } = useTranslation();\n  const [isExpanded, setIsExpanded] = useState(true);\n\n  const onArrowPress = () => {\n    setIsExpanded(!isExpanded);\n  };\n\n  const updateCard = (card: CardState) => {\n    onChange({ ...card, id });\n  };\n\n  const onDeleteCard = () => {\n    onDelete();\n  };\n\n  const updateTags = (tags: ITag[]) => {\n    updateCard({ tags });\n  };\n\n  const updateParticipants = (participants: IParticipant[]) => {\n    updateCard({ participants });\n  };\n\n  return (\n    <S.CardWrapper data-id={id} onClick={onClick} style={style} className={className}>\n      <S.CollapseCard onChange={onArrowPress} bordered={false} defaultActiveKey={['1']}>\n        <S.CardContent\n          showArrow={false}\n          key=\"1\"\n          header={\n            <S.CardHeader>\n              <S.CardTitle\n                draggable={cardDraggable}\n                onClick={(e: MouseEvent) => {\n                  e.stopPropagation();\n                }}\n              >\n                {editable ? (\n                  <S.Input\n                    name=\"title\"\n                    value={title}\n                    border\n                    placeholder={t('kanban.title')}\n                    resize=\"vertical\"\n                    onSave={(value: string) => updateCard({ title: value })}\n                  />\n                ) : (\n                  title\n                )}\n              </S.CardTitle>\n              <S.CardRightContent>\n                <Button noStyle type=\"text\" icon={<S.ArrowDownIcon $expanded={isExpanded} />} />\n                <Dropdown\n                  overlay={<EditPopover onDelete={onDeleteCard} onArchive={onDeleteCard} />}\n                  placement=\"bottomRight\"\n                  trigger={['click']}\n                >\n                  <Button\n                    noStyle\n                    type=\"text\"\n                    icon={<MoreOutlined />}\n                    onClick={(e) => {\n                      e.stopPropagation();\n                    }}\n                  />\n                </Dropdown>\n              </S.CardRightContent>\n            </S.CardHeader>\n          }\n        >\n          <S.CardDetails>\n            {editable ? (\n              <S.Input\n                value={description}\n                border\n                placeholder={t('kanban.description')}\n                resize=\"vertical\"\n                onSave={(value: string) => updateCard({ description: value })}\n              />\n            ) : (\n              description\n            )}\n          </S.CardDetails>\n          <S.CardFooter>\n            <TagDropdown selectedTags={tags} setSelectedTags={updateTags} />\n          </S.CardFooter>\n\n          <S.ParticipantsWrapper>\n            <ParticipantsDropdown selectedParticipants={participants} setSelectedParticipants={updateParticipants} />\n          </S.ParticipantsWrapper>\n        </S.CardContent>\n      </S.CollapseCard>\n    </S.CardWrapper>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}