{"ast":null,"code":"import _objectSpread from \"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/workspace/ant-design-react-template/src/components/tables/BasicTable/BasicTable.tsx\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { Col, Row, Space } from 'antd';\nimport { getBasicTableData } from 'api/table.api';\nimport { Table } from 'components/common/Table/Table';\nimport { Button } from 'components/common/buttons/Button/Button';\nimport { useTranslation } from 'react-i18next';\nimport { defineColorByPriority } from '@app/utils/utils';\nimport { notificationController } from 'controllers/notificationController';\nimport { Status } from '@app/components/profile/profileCard/profileFormNav/nav/payments/paymentHistory/Status/Status';\nimport { useMounted } from '@app/hooks/useMounted';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar initialPagination = {\n  current: 1,\n  pageSize: 5\n};\nexport var BasicTable = function BasicTable() {\n  _s();\n  var _useState = useState({\n      data: [],\n      pagination: initialPagination,\n      loading: false\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    tableData = _useState2[0],\n    setTableData = _useState2[1];\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var _useMounted = useMounted(),\n    isMounted = _useMounted.isMounted;\n  var fetch = useCallback(function (pagination) {\n    setTableData(function (tableData) {\n      return _objectSpread(_objectSpread({}, tableData), {}, {\n        loading: true\n      });\n    });\n    getBasicTableData(pagination).then(function (res) {\n      if (isMounted.current) {\n        setTableData({\n          data: res.data,\n          pagination: res.pagination,\n          loading: false\n        });\n      }\n    });\n  }, [isMounted]);\n  useEffect(function () {\n    fetch(initialPagination);\n  }, [fetch]);\n  var handleTableChange = function handleTableChange(pagination) {\n    fetch(pagination);\n  };\n  var handleDeleteRow = function handleDeleteRow(rowId) {\n    setTableData(_objectSpread(_objectSpread({}, tableData), {}, {\n      data: tableData.data.filter(function (item) {\n        return item.key !== rowId;\n      }),\n      pagination: _objectSpread(_objectSpread({}, tableData.pagination), {}, {\n        total: tableData.pagination.total ? tableData.pagination.total - 1 : tableData.pagination.total\n      })\n    }));\n  };\n  var columns = [{\n    title: t('common.name'),\n    dataIndex: 'name',\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 33\n      }, _this);\n    },\n    filterMode: 'tree',\n    filterSearch: true,\n    filters: [{\n      text: t('common.firstName'),\n      value: 'firstName',\n      children: [{\n        text: 'Joe',\n        value: 'Joe'\n      }, {\n        text: 'Pavel',\n        value: 'Pavel'\n      }, {\n        text: 'Jim',\n        value: 'Jim'\n      }, {\n        text: 'Josh',\n        value: 'Josh'\n      }]\n    }, {\n      text: t('common.lastName'),\n      value: 'lastName',\n      children: [{\n        text: 'Green',\n        value: 'Green'\n      }, {\n        text: 'Black',\n        value: 'Black'\n      }, {\n        text: 'Brown',\n        value: 'Brown'\n      }]\n    }],\n    onFilter: function onFilter(value, record) {\n      return record.name.includes(value.toString());\n    }\n  }, {\n    title: t('common.age'),\n    dataIndex: 'age',\n    sorter: function sorter(a, b) {\n      return a.age - b.age;\n    },\n    showSorterTooltip: false\n  }, {\n    title: t('common.address'),\n    dataIndex: 'address'\n  }, {\n    title: t('common.tags'),\n    key: 'tags',\n    dataIndex: 'tags',\n    render: function render(tags) {\n      return /*#__PURE__*/_jsxDEV(Row, {\n        gutter: [10, 10],\n        children: tags.map(function (tag) {\n          return /*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(Status, {\n              color: defineColorByPriority(tag.priority),\n              text: tag.value.toUpperCase()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 17\n            }, _this)\n          }, tag.value, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, _this);\n    }\n  }, {\n    title: t('tables.actions'),\n    dataIndex: 'actions',\n    width: '15%',\n    render: function render(text, record) {\n      return /*#__PURE__*/_jsxDEV(Space, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"ghost\",\n          onClick: function onClick() {\n            notificationController.info({\n              message: t('tables.inviteMessage', {\n                name: record.name\n              })\n            });\n          },\n          children: t('tables.invite')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"default\",\n          danger: true,\n          onClick: function onClick() {\n            return handleDeleteRow(record.key);\n          },\n          children: t('tables.delete')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }, _this);\n    }\n  }];\n  return /*#__PURE__*/_jsxDEV(Table, {\n    columns: columns,\n    dataSource: tableData.data,\n    pagination: tableData.pagination,\n    loading: tableData.loading,\n    onChange: handleTableChange,\n    scroll: {\n      x: 800\n    },\n    bordered: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 5\n  }, _this);\n};\n_s(BasicTable, \"pN2AzRVj8c46k2h3oV10hjKaEeQ=\", false, function () {\n  return [useTranslation, useMounted];\n});\n_c = BasicTable;\nvar _c;\n$RefreshReg$(_c, \"BasicTable\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","Col","Row","Space","getBasicTableData","Table","Button","useTranslation","defineColorByPriority","notificationController","Status","useMounted","initialPagination","current","pageSize","BasicTable","data","pagination","loading","tableData","setTableData","t","isMounted","fetch","then","res","handleTableChange","handleDeleteRow","rowId","filter","item","key","total","columns","title","dataIndex","render","text","filterMode","filterSearch","filters","value","children","onFilter","record","name","includes","toString","sorter","a","b","age","showSorterTooltip","tags","map","tag","priority","toUpperCase","width","info","message","x"],"sources":["/workspace/ant-design-react-template/src/components/tables/BasicTable/BasicTable.tsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { Col, Row, Space, TablePaginationConfig } from 'antd';\nimport { BasicTableRow, getBasicTableData, Pagination, Tag } from 'api/table.api';\nimport { Table } from 'components/common/Table/Table';\nimport { ColumnsType } from 'antd/es/table';\nimport { Button } from 'components/common/buttons/Button/Button';\nimport { useTranslation } from 'react-i18next';\nimport { defineColorByPriority } from '@app/utils/utils';\nimport { notificationController } from 'controllers/notificationController';\nimport { Status } from '@app/components/profile/profileCard/profileFormNav/nav/payments/paymentHistory/Status/Status';\nimport { useMounted } from '@app/hooks/useMounted';\n\nconst initialPagination: Pagination = {\n  current: 1,\n  pageSize: 5,\n};\n\nexport const BasicTable: React.FC = () => {\n  const [tableData, setTableData] = useState<{ data: BasicTableRow[]; pagination: Pagination; loading: boolean }>({\n    data: [],\n    pagination: initialPagination,\n    loading: false,\n  });\n  const { t } = useTranslation();\n  const { isMounted } = useMounted();\n\n  const fetch = useCallback(\n    (pagination: Pagination) => {\n      setTableData((tableData) => ({ ...tableData, loading: true }));\n      getBasicTableData(pagination).then((res) => {\n        if (isMounted.current) {\n          setTableData({ data: res.data, pagination: res.pagination, loading: false });\n        }\n      });\n    },\n    [isMounted],\n  );\n\n  useEffect(() => {\n    fetch(initialPagination);\n  }, [fetch]);\n\n  const handleTableChange = (pagination: TablePaginationConfig) => {\n    fetch(pagination);\n  };\n\n  const handleDeleteRow = (rowId: number) => {\n    setTableData({\n      ...tableData,\n      data: tableData.data.filter((item) => item.key !== rowId),\n      pagination: {\n        ...tableData.pagination,\n        total: tableData.pagination.total ? tableData.pagination.total - 1 : tableData.pagination.total,\n      },\n    });\n  };\n\n  const columns: ColumnsType<BasicTableRow> = [\n    {\n      title: t('common.name'),\n      dataIndex: 'name',\n      render: (text: string) => <span>{text}</span>,\n      filterMode: 'tree',\n      filterSearch: true,\n      filters: [\n        {\n          text: t('common.firstName'),\n          value: 'firstName',\n          children: [\n            {\n              text: 'Joe',\n              value: 'Joe',\n            },\n            {\n              text: 'Pavel',\n              value: 'Pavel',\n            },\n            {\n              text: 'Jim',\n              value: 'Jim',\n            },\n            {\n              text: 'Josh',\n              value: 'Josh',\n            },\n          ],\n        },\n        {\n          text: t('common.lastName'),\n          value: 'lastName',\n          children: [\n            {\n              text: 'Green',\n              value: 'Green',\n            },\n            {\n              text: 'Black',\n              value: 'Black',\n            },\n            {\n              text: 'Brown',\n              value: 'Brown',\n            },\n          ],\n        },\n      ],\n      onFilter: (value: string | number | boolean, record: BasicTableRow) => record.name.includes(value.toString()),\n    },\n    {\n      title: t('common.age'),\n      dataIndex: 'age',\n      sorter: (a: BasicTableRow, b: BasicTableRow) => a.age - b.age,\n      showSorterTooltip: false,\n    },\n    {\n      title: t('common.address'),\n      dataIndex: 'address',\n    },\n    {\n      title: t('common.tags'),\n      key: 'tags',\n      dataIndex: 'tags',\n      render: (tags: Tag[]) => (\n        <Row gutter={[10, 10]}>\n          {tags.map((tag: Tag) => {\n            return (\n              <Col key={tag.value}>\n                <Status color={defineColorByPriority(tag.priority)} text={tag.value.toUpperCase()} />\n              </Col>\n            );\n          })}\n        </Row>\n      ),\n    },\n    {\n      title: t('tables.actions'),\n      dataIndex: 'actions',\n      width: '15%',\n      render: (text: string, record: { name: string; key: number }) => {\n        return (\n          <Space>\n            <Button\n              type=\"ghost\"\n              onClick={() => {\n                notificationController.info({ message: t('tables.inviteMessage', { name: record.name }) });\n              }}\n            >\n              {t('tables.invite')}\n            </Button>\n            <Button type=\"default\" danger onClick={() => handleDeleteRow(record.key)}>\n              {t('tables.delete')}\n            </Button>\n          </Space>\n        );\n      },\n    },\n  ];\n\n  return (\n    <Table\n      columns={columns}\n      dataSource={tableData.data}\n      pagination={tableData.pagination}\n      loading={tableData.loading}\n      onChange={handleTableChange}\n      scroll={{ x: 800 }}\n      bordered\n    />\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}