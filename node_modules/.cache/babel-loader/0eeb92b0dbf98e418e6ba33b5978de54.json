{"ast":null,"code":"import _objectSpread from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Avatar}from'antd';import{SmileOutlined,UserOutlined}from'@ant-design/icons';import{BaseButtonsForm}from'@app/components/common/forms/BaseButtonsForm/BaseButtonsForm';import{AddUserFormModal}from'./AddUserFormModal';import{Input}from'../../common/inputs/Input/Input';import{Button}from'../../common/buttons/Button/Button';import{useTranslation}from'react-i18next';import*as S from'./ControlForm.styles';import{notificationController}from'@app/controllers/notificationController';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var layout={labelCol:{span:24},wrapperCol:{span:24}};export var ControlForm=function ControlForm(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFieldsChanged=_useState4[0],setFieldsChanged=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setLoading=_useState6[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var showUserModal=function showUserModal(){setVisible(true);};var hideUserModal=function hideUserModal(){setVisible(false);};var onFinish=function onFinish(){var values=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};setLoading(true);setTimeout(function(){setFieldsChanged(false);setLoading(false);notificationController.success({message:t('common.success')});console.log(values);},1000);};return/*#__PURE__*/_jsxs(BaseButtonsForm.Provider,{onFormFinish:function onFormFinish(name,_ref){var values=_ref.values,forms=_ref.forms;if(name==='userForm'){var controlForm=forms.controlForm;var users=controlForm.getFieldValue('users')||[];controlForm.setFieldsValue({users:[].concat(_toConsumableArray(users),[values])});setVisible(false);}},children:[/*#__PURE__*/_jsxs(BaseButtonsForm,_objectSpread(_objectSpread({},layout),{},{name:\"controlForm\",isFieldsChanged:isFieldsChanged,footer:/*#__PURE__*/_jsxs(BaseButtonsForm.Item,{children:[/*#__PURE__*/_jsx(Button,{htmlType:\"submit\",type:\"primary\",loading:isLoading,children:t('common.submit')}),/*#__PURE__*/_jsx(S.AddUserButton,{type:\"default\",htmlType:\"button\",onClick:showUserModal,children:t('forms.controlFormLabels.addUser')})]}),onFinish:onFinish,onFieldsChange:function onFieldsChange(){return setFieldsChanged(true);},children:[/*#__PURE__*/_jsx(BaseButtonsForm.Item,{name:\"group\",label:t('forms.controlFormLabels.groupName'),rules:[{required:true,message:t('forms.controlFormLabels.groupNameError')}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(S.UserList,{label:t('forms.controlFormLabels.userList')// eslint-disable-next-line\n,shouldUpdate:function shouldUpdate(prevValues,curValues){return prevValues.users!==curValues.users;},children:function children(_ref2){var getFieldValue=_ref2.getFieldValue;var users=getFieldValue('users')||[];return users.length?/*#__PURE__*/_jsx(S.List,{children:users.map(function(user,index){return/*#__PURE__*/_jsxs(S.ListItem,{children:[/*#__PURE__*/_jsx(Avatar,{icon:/*#__PURE__*/_jsx(UserOutlined,{})}),/*#__PURE__*/_jsxs(S.User,{children:[user.name,\" - \",user.age]})]},index);})}):/*#__PURE__*/_jsxs(S.Text,{children:[\"( \",/*#__PURE__*/_jsx(SmileOutlined,{}),\" \",t('forms.controlFormLabels.noUser'),\" )\"]});}})]})),/*#__PURE__*/_jsx(AddUserFormModal,{visible:visible,onCancel:hideUserModal})]});};","map":{"version":3,"names":["React","useState","Avatar","SmileOutlined","UserOutlined","BaseButtonsForm","AddUserFormModal","Input","Button","useTranslation","S","notificationController","layout","labelCol","span","wrapperCol","ControlForm","visible","setVisible","isFieldsChanged","setFieldsChanged","isLoading","setLoading","t","showUserModal","hideUserModal","onFinish","values","setTimeout","success","message","console","log","name","forms","controlForm","users","getFieldValue","setFieldsValue","required","prevValues","curValues","length","map","user","index","age"],"sources":["/workspace/ant-design-react-template/src/components/forms/ControlForm/ControlForm.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Avatar } from 'antd';\nimport { SmileOutlined, UserOutlined } from '@ant-design/icons';\nimport { BaseButtonsForm } from '@app/components/common/forms/BaseButtonsForm/BaseButtonsForm';\nimport { AddUserFormModal } from './AddUserFormModal';\nimport { Input } from '../../common/inputs/Input/Input';\nimport { Button } from '../../common/buttons/Button/Button';\nimport { useTranslation } from 'react-i18next';\nimport * as S from './ControlForm.styles';\nimport { notificationController } from '@app/controllers/notificationController';\n\nconst layout = {\n  labelCol: { span: 24 },\n  wrapperCol: { span: 24 },\n};\n\ninterface UserType {\n  name: string;\n  age: string;\n}\n\nexport const ControlForm: React.FC = () => {\n  const [visible, setVisible] = useState(false);\n  const [isFieldsChanged, setFieldsChanged] = useState(false);\n  const [isLoading, setLoading] = useState(false);\n  const { t } = useTranslation();\n\n  const showUserModal = () => {\n    setVisible(true);\n  };\n\n  const hideUserModal = () => {\n    setVisible(false);\n  };\n\n  const onFinish = (values = {}) => {\n    setLoading(true);\n    setTimeout(() => {\n      setFieldsChanged(false);\n      setLoading(false);\n      notificationController.success({ message: t('common.success') });\n      console.log(values);\n    }, 1000);\n  };\n\n  return (\n    <BaseButtonsForm.Provider\n      onFormFinish={(name, { values, forms }) => {\n        if (name === 'userForm') {\n          const { controlForm } = forms;\n          const users = controlForm.getFieldValue('users') || [];\n          controlForm.setFieldsValue({ users: [...users, values] });\n          setVisible(false);\n        }\n      }}\n    >\n      <BaseButtonsForm\n        {...layout}\n        name=\"controlForm\"\n        isFieldsChanged={isFieldsChanged}\n        footer={\n          <BaseButtonsForm.Item>\n            <Button htmlType=\"submit\" type=\"primary\" loading={isLoading}>\n              {t('common.submit')}\n            </Button>\n            <S.AddUserButton type=\"default\" htmlType=\"button\" onClick={showUserModal}>\n              {t('forms.controlFormLabels.addUser')}\n            </S.AddUserButton>\n          </BaseButtonsForm.Item>\n        }\n        onFinish={onFinish}\n        onFieldsChange={() => setFieldsChanged(true)}\n      >\n        <BaseButtonsForm.Item\n          name=\"group\"\n          label={t('forms.controlFormLabels.groupName')}\n          rules={[{ required: true, message: t('forms.controlFormLabels.groupNameError') }]}\n        >\n          <Input />\n        </BaseButtonsForm.Item>\n        <S.UserList\n          label={t('forms.controlFormLabels.userList')}\n          // eslint-disable-next-line\n          shouldUpdate={(prevValues: any, curValues: any) => prevValues.users !== curValues.users}\n        >\n          {({ getFieldValue }) => {\n            const users: UserType[] = getFieldValue('users') || [];\n            return users.length ? (\n              <S.List>\n                {users.map((user, index) => (\n                  <S.ListItem key={index}>\n                    <Avatar icon={<UserOutlined />} />\n                    <S.User>\n                      {user.name} - {user.age}\n                    </S.User>\n                  </S.ListItem>\n                ))}\n              </S.List>\n            ) : (\n              <S.Text>\n                ( <SmileOutlined /> {t('forms.controlFormLabels.noUser')} )\n              </S.Text>\n            );\n          }}\n        </S.UserList>\n      </BaseButtonsForm>\n      <AddUserFormModal visible={visible} onCancel={hideUserModal} />\n    </BaseButtonsForm.Provider>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}