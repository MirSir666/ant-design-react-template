{"ast":null,"code":"import _slicedToArray from\"/workspace/lightence-ant-design-react-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useTranslation}from'react-i18next';import{BaseForm}from'@app/components/common/forms/BaseForm/BaseForm';import{Button}from'@app/components/common/buttons/Button/Button';import{Step1}from'./Steps/Step1';import{Step2}from'./Steps/Step2';import{Step3}from'./Steps/Step3';import{Step4}from'./Steps/Step4';import{notificationController}from'@app/controllers/notificationController';import{Dates}from'@app/constants/Dates';import{mergeBy}from'@app/utils/utils';import*as S from'./StepForm.styles';import{Steps}from'./StepForm.styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var StepForm=function StepForm(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),current=_useState2[0],setCurrent=_useState2[1];var _BaseForm$useForm=BaseForm.useForm(),_BaseForm$useForm2=_slicedToArray(_BaseForm$useForm,1),form=_BaseForm$useForm2[0];var _useState3=useState([{name:'login',value:'Jerri'},{name:'password',value:'123456'},{name:'confirmPassword',value:'123456'},{name:'salutation',value:'mr'},{name:'gender',value:'male'},{name:'firstName',value:'John'},{name:'lastName',value:'Black'},{name:'birthday',value:Dates.getDate(1576789200000)},{name:'phone',value:'298573124'},{name:'email',value:''},{name:'address1',value:'Slobodskay street'},{name:'address2',value:'Nevski street'},{name:'zipCode',value:'435123'},{name:'city',value:'Minsk'},{name:'country',value:'Belarus'},{name:'prefix',value:'+7'}]),_useState4=_slicedToArray(_useState3,2),fields=_useState4[0],setFields=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var formLabels={login:t('forms.stepFormLabels.login'),password:t('common.password'),confirmPassword:t('common.confirmPassword'),salutation:t('forms.stepFormLabels.salutation'),gender:t('forms.stepFormLabels.gender'),firstName:t('common.firstName'),lastName:t('common.lastName'),birthday:t('forms.stepFormLabels.birthday'),phone:t('common.phone'),email:t('common.email'),address1:\"\".concat(t('common.address'),\" 1\"),address2:\"\".concat(t('common.address'),\" 2\"),zipCode:t('common.zipcode'),city:t('common.city'),country:t('common.country')};var formValues=fields.filter(function(item){return item.name!=='prefix';}).map(function(item){return{name:formLabels[item.name],value:String(item.name==='birthday'&&item.value?item.value.format('YYYY-MM-DD'):item.value)};});var next=function next(){form.validateFields().then(function(){setCurrent(current+1);});};var prev=function prev(){setCurrent(current-1);};var onFinish=function onFinish(){setIsLoading(true);setTimeout(function(){notificationController.success({message:t('common.success')});setIsLoading(false);setCurrent(0);},1500);};var steps=[{title:t('common.country')},{title:t('forms.stepFormLabels.info')},{title:t('forms.stepFormLabels.location')},{title:t('forms.stepFormLabels.confirm')}];var formFieldsUi=[/*#__PURE__*/_jsx(Step1,{},\"1\"),/*#__PURE__*/_jsx(Step2,{},\"2\"),/*#__PURE__*/_jsx(Step3,{},\"3\"),/*#__PURE__*/_jsx(Step4,{formValues:formValues},\"4\")];return/*#__PURE__*/_jsxs(BaseForm,{name:\"stepForm\",form:form,fields:fields,onFieldsChange:function onFieldsChange(_,allFields){var currentFields=allFields.map(function(item){return{name:Array.isArray(item.name)?item.name[0]:'',value:item.value};});var uniqueData=mergeBy(fields,currentFields,'name');setFields(uniqueData);},children:[/*#__PURE__*/_jsx(Steps,{labelPlacement:\"vertical\",size:\"small\",current:current,children:steps.map(function(item){return/*#__PURE__*/_jsx(Steps.Step,{title:item.title,description:\"\"},item.title);})}),/*#__PURE__*/_jsx(\"div\",{children:formFieldsUi[current]}),/*#__PURE__*/_jsxs(\"div\",{children:[current<steps.length-1&&/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:function onClick(){return next();},children:t('forms.stepFormLabels.next')}),current===steps.length-1&&/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:onFinish,loading:isLoading,children:t('forms.stepFormLabels.done')}),current>0&&/*#__PURE__*/_jsx(S.PrevButton,{type:\"default\",onClick:function onClick(){return prev();},children:t('forms.stepFormLabels.previous')})]})]});};","map":{"version":3,"sources":["/workspace/lightence-ant-design-react-template/src/components/forms/StepForm/StepForm.tsx"],"names":["React","useState","useTranslation","BaseForm","Button","Step1","Step2","Step3","Step4","notificationController","Dates","mergeBy","S","Steps","StepForm","current","setCurrent","useForm","form","name","value","getDate","fields","setFields","isLoading","setIsLoading","t","formLabels","login","password","confirmPassword","salutation","gender","firstName","lastName","birthday","phone","email","address1","address2","zipCode","city","country","formValues","filter","item","map","String","format","next","validateFields","then","prev","onFinish","setTimeout","success","message","steps","title","formFieldsUi","_","allFields","currentFields","Array","isArray","uniqueData","length"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { BaseForm } from '@app/components/common/forms/BaseForm/BaseForm';\nimport { Button } from '@app/components/common/buttons/Button/Button';\nimport { Step1 } from './Steps/Step1';\nimport { Step2 } from './Steps/Step2';\nimport { Step3 } from './Steps/Step3';\nimport { Step4 } from './Steps/Step4';\nimport { notificationController } from '@app/controllers/notificationController';\nimport { Dates } from '@app/constants/Dates';\nimport { mergeBy } from '@app/utils/utils';\nimport * as S from './StepForm.styles';\nimport { Steps } from './StepForm.styles';\ninterface FormValues {\n  [key: string]: string | undefined;\n}\n\ninterface FieldData {\n  name: string | number;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value?: any;\n}\n\nexport const StepForm: React.FC = () => {\n  const [current, setCurrent] = useState(0);\n  const [form] = BaseForm.useForm();\n  const [fields, setFields] = useState<FieldData[]>([\n    { name: 'login', value: 'Jerri' },\n    { name: 'password', value: '123456' },\n    { name: 'confirmPassword', value: '123456' },\n    { name: 'salutation', value: 'mr' },\n    { name: 'gender', value: 'male' },\n    { name: 'firstName', value: 'John' },\n    { name: 'lastName', value: 'Black' },\n    { name: 'birthday', value: Dates.getDate(1576789200000) },\n    { name: 'phone', value: '298573124' },\n    { name: 'email', value: '' },\n    { name: 'address1', value: 'Slobodskay street' },\n    { name: 'address2', value: 'Nevski street' },\n    { name: 'zipCode', value: '435123' },\n    { name: 'city', value: 'Minsk' },\n    { name: 'country', value: 'Belarus' },\n    { name: 'prefix', value: '+7' },\n  ]);\n  const [isLoading, setIsLoading] = useState(false);\n  const { t } = useTranslation();\n\n  const formLabels: FormValues = {\n    login: t('forms.stepFormLabels.login'),\n    password: t('common.password'),\n    confirmPassword: t('common.confirmPassword'),\n    salutation: t('forms.stepFormLabels.salutation'),\n    gender: t('forms.stepFormLabels.gender'),\n    firstName: t('common.firstName'),\n    lastName: t('common.lastName'),\n    birthday: t('forms.stepFormLabels.birthday'),\n    phone: t('common.phone'),\n    email: t('common.email'),\n    address1: `${t('common.address')} 1`,\n    address2: `${t('common.address')} 2`,\n    zipCode: t('common.zipcode'),\n    city: t('common.city'),\n    country: t('common.country'),\n  };\n\n  const formValues = fields\n    .filter((item) => item.name !== 'prefix')\n    .map((item) => ({\n      name: formLabels[item.name],\n      value: String(item.name === 'birthday' && item.value ? item.value.format('YYYY-MM-DD') : item.value),\n    }));\n\n  const next = () => {\n    form.validateFields().then(() => {\n      setCurrent(current + 1);\n    });\n  };\n\n  const prev = () => {\n    setCurrent(current - 1);\n  };\n\n  const onFinish = () => {\n    setIsLoading(true);\n    setTimeout(() => {\n      notificationController.success({ message: t('common.success') });\n      setIsLoading(false);\n      setCurrent(0);\n    }, 1500);\n  };\n\n  const steps = [\n    {\n      title: t('common.country'),\n    },\n    {\n      title: t('forms.stepFormLabels.info'),\n    },\n    {\n      title: t('forms.stepFormLabels.location'),\n    },\n    {\n      title: t('forms.stepFormLabels.confirm'),\n    },\n  ];\n\n  const formFieldsUi = [\n    <Step1 key=\"1\" />,\n    <Step2 key=\"2\" />,\n    <Step3 key=\"3\" />,\n    <Step4 key=\"4\" formValues={formValues} />,\n  ];\n\n  return (\n    <BaseForm\n      name=\"stepForm\"\n      form={form}\n      fields={fields}\n      onFieldsChange={(_, allFields) => {\n        const currentFields = allFields.map((item) => ({\n          name: Array.isArray(item.name) ? item.name[0] : '',\n          value: item.value,\n        }));\n        const uniqueData = mergeBy(fields, currentFields, 'name');\n        setFields(uniqueData);\n      }}\n    >\n      <Steps labelPlacement=\"vertical\" size=\"small\" current={current}>\n        {steps.map((item) => (\n          <Steps.Step key={item.title} title={item.title} description=\"\" />\n        ))}\n      </Steps>\n      <div>{formFieldsUi[current]}</div>\n      <div>\n        {current < steps.length - 1 && (\n          <Button type=\"primary\" onClick={() => next()}>\n            {t('forms.stepFormLabels.next')}\n          </Button>\n        )}\n        {current === steps.length - 1 && (\n          <Button type=\"primary\" onClick={onFinish} loading={isLoading}>\n            {t('forms.stepFormLabels.done')}\n          </Button>\n        )}\n        {current > 0 && (\n          <S.PrevButton type=\"default\" onClick={() => prev()}>\n            {t('forms.stepFormLabels.previous')}\n          </S.PrevButton>\n        )}\n      </div>\n    </BaseForm>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}