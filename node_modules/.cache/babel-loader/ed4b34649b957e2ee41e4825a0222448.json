{"ast":null,"code":"import _slicedToArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{Avatar}from'antd';import{useTranslation}from'react-i18next';import{BaseForm}from'@app/components/common/forms/BaseForm/BaseForm';import{initValues as loginInitVal}from'@app/components/auth/LoginForm/LoginForm';import{notificationController}from'@app/controllers/notificationController';import{useAppDispatch,useAppSelector}from'@app/hooks/reduxHooks';import{useResponsive}from'@app/hooks/useResponsive';import{Dates}from'@app/constants/Dates';import{doLogin}from'@app/store/slices/authSlice';import*as Auth from'@app/components/layouts/AuthLayout/AuthLayout.styles';import*as S from'./LockForm.styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initValues={password:loginInitVal.password};export var LockForm=function LockForm(){var navigate=useNavigate();var _useResponsive=useResponsive(),mobileOnly=_useResponsive.mobileOnly;var _useTranslation=useTranslation(),t=_useTranslation.t;var dispatch=useAppDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(new Date()),_useState4=_slicedToArray(_useState3,2),dateState=_useState4[0],setDateState=_useState4[1];var user=useAppSelector(function(state){return state.user.user;});var fullName=\"\".concat(user===null||user===void 0?void 0:user.firstName,\" \").concat(user===null||user===void 0?void 0:user.lastName);var currentDateInUTC=dateState.toUTCString();var currentTime=Dates.format(currentDateInUTC,'h:mm A');var currentDate=Dates.format(currentDateInUTC,'dddd, MMMM D, YYYY');useEffect(function(){var interval=setInterval(function(){return setDateState(new Date());},10*1000);return function(){return clearInterval(interval);};},[]);var handleSubmit=function handleSubmit(_ref){var password=_ref.password;setLoading(true);dispatch(doLogin({email:(user===null||user===void 0?void 0:user.email.name)||'',password:password})).unwrap().then(function(){navigate(-1);}).catch(function(e){notificationController.error({message:e.message});setLoading(false);});};return/*#__PURE__*/_jsx(Auth.FormWrapper,{children:/*#__PURE__*/_jsxs(BaseForm,{layout:\"vertical\",onFinish:handleSubmit,requiredMark:\"optional\",initialValues:initValues,children:[/*#__PURE__*/_jsxs(S.ContentWrapper,{children:[/*#__PURE__*/_jsx(S.Time,{children:currentTime}),/*#__PURE__*/_jsx(S.Date,{children:currentDate}),/*#__PURE__*/_jsx(S.AvatarCircle,{children:/*#__PURE__*/_jsx(Avatar,{src:user===null||user===void 0?void 0:user.imgUrl,alt:\"user avatar\",size:mobileOnly?59:77})}),/*#__PURE__*/_jsx(S.Name,{children:fullName})]}),/*#__PURE__*/_jsx(S.FormItem,{label:t('common.password'),name:\"password\",rules:[{required:true,message:t('common.requiredField')}],children:/*#__PURE__*/_jsx(Auth.FormInputPassword,{placeholder:t('common.password')})}),/*#__PURE__*/_jsx(BaseForm.Item,{noStyle:true,children:/*#__PURE__*/_jsx(Auth.SubmitButton,{type:\"primary\",htmlType:\"submit\",loading:isLoading,children:t('common.login')})})]})});};","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Avatar","useTranslation","BaseForm","initValues","loginInitVal","notificationController","useAppDispatch","useAppSelector","useResponsive","Dates","doLogin","Auth","S","password","LockForm","navigate","mobileOnly","t","dispatch","isLoading","setLoading","Date","dateState","setDateState","user","state","fullName","firstName","lastName","currentDateInUTC","toUTCString","currentTime","format","currentDate","interval","setInterval","clearInterval","handleSubmit","email","name","unwrap","then","catch","e","error","message","imgUrl","required"],"sources":["/workspace/ant-design-react-template/src/components/auth/LockForm/LockForm.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Avatar } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { BaseForm } from '@app/components/common/forms/BaseForm/BaseForm';\nimport { initValues as loginInitVal } from '@app/components/auth/LoginForm/LoginForm';\nimport { notificationController } from '@app/controllers/notificationController';\nimport { useAppDispatch, useAppSelector } from '@app/hooks/reduxHooks';\nimport { useResponsive } from '@app/hooks/useResponsive';\nimport { Dates } from '@app/constants/Dates';\nimport { doLogin } from '@app/store/slices/authSlice';\nimport * as Auth from '@app/components/layouts/AuthLayout/AuthLayout.styles';\nimport * as S from './LockForm.styles';\n\ninterface LockFormData {\n  password: string;\n}\n\nconst initValues = {\n  password: loginInitVal.password,\n};\n\nexport const LockForm: React.FC = () => {\n  const navigate = useNavigate();\n  const { mobileOnly } = useResponsive();\n  const { t } = useTranslation();\n  const dispatch = useAppDispatch();\n\n  const [isLoading, setLoading] = useState(false);\n  const [dateState, setDateState] = useState(new Date());\n  const user = useAppSelector((state) => state.user.user);\n  const fullName = `${user?.firstName} ${user?.lastName}`;\n\n  const currentDateInUTC = dateState.toUTCString();\n  const currentTime = Dates.format(currentDateInUTC, 'h:mm A');\n  const currentDate = Dates.format(currentDateInUTC, 'dddd, MMMM D, YYYY');\n\n  useEffect(() => {\n    const interval = setInterval(() => setDateState(new Date()), 10 * 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const handleSubmit = ({ password }: LockFormData) => {\n    setLoading(true);\n    dispatch(doLogin({ email: user?.email.name || '', password }))\n      .unwrap()\n      .then(() => {\n        navigate(-1);\n      })\n      .catch((e) => {\n        notificationController.error({ message: e.message });\n        setLoading(false);\n      });\n  };\n\n  return (\n    <Auth.FormWrapper>\n      <BaseForm layout=\"vertical\" onFinish={handleSubmit} requiredMark=\"optional\" initialValues={initValues}>\n        <S.ContentWrapper>\n          <S.Time>{currentTime}</S.Time>\n          <S.Date>{currentDate}</S.Date>\n          <S.AvatarCircle>\n            <Avatar src={user?.imgUrl} alt=\"user avatar\" size={mobileOnly ? 59 : 77} />\n          </S.AvatarCircle>\n          <S.Name>{fullName}</S.Name>\n        </S.ContentWrapper>\n        <S.FormItem\n          label={t('common.password')}\n          name=\"password\"\n          rules={[{ required: true, message: t('common.requiredField') }]}\n        >\n          <Auth.FormInputPassword placeholder={t('common.password')} />\n        </S.FormItem>\n        <BaseForm.Item noStyle>\n          <Auth.SubmitButton type=\"primary\" htmlType=\"submit\" loading={isLoading}>\n            {t('common.login')}\n          </Auth.SubmitButton>\n        </BaseForm.Item>\n      </BaseForm>\n    </Auth.FormWrapper>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}