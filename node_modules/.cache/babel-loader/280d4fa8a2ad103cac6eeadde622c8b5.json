{"ast":null,"code":"import _slicedToArray from\"/workspace/lightence-ant-design-react-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{Avatar}from'antd';import{useTranslation}from'react-i18next';import{BaseForm}from'@app/components/common/forms/BaseForm/BaseForm';import{initValues as loginInitVal}from'@app/components/auth/LoginForm/LoginForm';import{notificationController}from'@app/controllers/notificationController';import{useAppDispatch,useAppSelector}from'@app/hooks/reduxHooks';import{useResponsive}from'@app/hooks/useResponsive';import{Dates}from'@app/constants/Dates';import{doLogin}from'@app/store/slices/authSlice';import*as Auth from'@app/components/layouts/AuthLayout/AuthLayout.styles';import*as S from'./LockForm.styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initValues={password:loginInitVal.password};export var LockForm=function LockForm(){var navigate=useNavigate();var _useResponsive=useResponsive(),mobileOnly=_useResponsive.mobileOnly;var _useTranslation=useTranslation(),t=_useTranslation.t;var dispatch=useAppDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(new Date()),_useState4=_slicedToArray(_useState3,2),dateState=_useState4[0],setDateState=_useState4[1];var user=useAppSelector(function(state){return state.user.user;});var fullName=\"\".concat(user===null||user===void 0?void 0:user.firstName,\" \").concat(user===null||user===void 0?void 0:user.lastName);var currentDateInUTC=dateState.toUTCString();var currentTime=Dates.format(currentDateInUTC,'h:mm A');var currentDate=Dates.format(currentDateInUTC,'dddd, MMMM D, YYYY');useEffect(function(){var interval=setInterval(function(){return setDateState(new Date());},10*1000);return function(){return clearInterval(interval);};},[]);var handleSubmit=function handleSubmit(_ref){var password=_ref.password;setLoading(true);dispatch(doLogin({email:(user===null||user===void 0?void 0:user.email.name)||'',password:password})).unwrap().then(function(){navigate(-1);}).catch(function(e){notificationController.error({message:e.message});setLoading(false);});};return/*#__PURE__*/_jsx(Auth.FormWrapper,{children:/*#__PURE__*/_jsxs(BaseForm,{layout:\"vertical\",onFinish:handleSubmit,requiredMark:\"optional\",initialValues:initValues,children:[/*#__PURE__*/_jsxs(S.ContentWrapper,{children:[/*#__PURE__*/_jsx(S.Time,{children:currentTime}),/*#__PURE__*/_jsx(S.Date,{children:currentDate}),/*#__PURE__*/_jsx(S.AvatarCircle,{children:/*#__PURE__*/_jsx(Avatar,{src:user===null||user===void 0?void 0:user.imgUrl,alt:\"user avatar\",size:mobileOnly?59:77})}),/*#__PURE__*/_jsx(S.Name,{children:fullName})]}),/*#__PURE__*/_jsx(S.FormItem,{label:t('common.password'),name:\"password\",rules:[{required:true,message:t('common.requiredField')}],children:/*#__PURE__*/_jsx(Auth.FormInputPassword,{placeholder:t('common.password')})}),/*#__PURE__*/_jsx(BaseForm.Item,{noStyle:true,children:/*#__PURE__*/_jsx(Auth.SubmitButton,{type:\"primary\",htmlType:\"submit\",loading:isLoading,children:t('common.login')})})]})});};","map":{"version":3,"sources":["/workspace/lightence-ant-design-react-template/src/components/auth/LockForm/LockForm.tsx"],"names":["React","useState","useEffect","useNavigate","Avatar","useTranslation","BaseForm","initValues","loginInitVal","notificationController","useAppDispatch","useAppSelector","useResponsive","Dates","doLogin","Auth","S","password","LockForm","navigate","mobileOnly","t","dispatch","isLoading","setLoading","Date","dateState","setDateState","user","state","fullName","firstName","lastName","currentDateInUTC","toUTCString","currentTime","format","currentDate","interval","setInterval","clearInterval","handleSubmit","email","name","unwrap","then","catch","e","error","message","imgUrl","required"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Avatar } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { BaseForm } from '@app/components/common/forms/BaseForm/BaseForm';\nimport { initValues as loginInitVal } from '@app/components/auth/LoginForm/LoginForm';\nimport { notificationController } from '@app/controllers/notificationController';\nimport { useAppDispatch, useAppSelector } from '@app/hooks/reduxHooks';\nimport { useResponsive } from '@app/hooks/useResponsive';\nimport { Dates } from '@app/constants/Dates';\nimport { doLogin } from '@app/store/slices/authSlice';\nimport * as Auth from '@app/components/layouts/AuthLayout/AuthLayout.styles';\nimport * as S from './LockForm.styles';\n\ninterface LockFormData {\n  password: string;\n}\n\nconst initValues = {\n  password: loginInitVal.password,\n};\n\nexport const LockForm: React.FC = () => {\n  const navigate = useNavigate();\n  const { mobileOnly } = useResponsive();\n  const { t } = useTranslation();\n  const dispatch = useAppDispatch();\n\n  const [isLoading, setLoading] = useState(false);\n  const [dateState, setDateState] = useState(new Date());\n  const user = useAppSelector((state) => state.user.user);\n  const fullName = `${user?.firstName} ${user?.lastName}`;\n\n  const currentDateInUTC = dateState.toUTCString();\n  const currentTime = Dates.format(currentDateInUTC, 'h:mm A');\n  const currentDate = Dates.format(currentDateInUTC, 'dddd, MMMM D, YYYY');\n\n  useEffect(() => {\n    const interval = setInterval(() => setDateState(new Date()), 10 * 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const handleSubmit = ({ password }: LockFormData) => {\n    setLoading(true);\n    dispatch(doLogin({ email: user?.email.name || '', password }))\n      .unwrap()\n      .then(() => {\n        navigate(-1);\n      })\n      .catch((e) => {\n        notificationController.error({ message: e.message });\n        setLoading(false);\n      });\n  };\n\n  return (\n    <Auth.FormWrapper>\n      <BaseForm layout=\"vertical\" onFinish={handleSubmit} requiredMark=\"optional\" initialValues={initValues}>\n        <S.ContentWrapper>\n          <S.Time>{currentTime}</S.Time>\n          <S.Date>{currentDate}</S.Date>\n          <S.AvatarCircle>\n            <Avatar src={user?.imgUrl} alt=\"user avatar\" size={mobileOnly ? 59 : 77} />\n          </S.AvatarCircle>\n          <S.Name>{fullName}</S.Name>\n        </S.ContentWrapper>\n        <S.FormItem\n          label={t('common.password')}\n          name=\"password\"\n          rules={[{ required: true, message: t('common.requiredField') }]}\n        >\n          <Auth.FormInputPassword placeholder={t('common.password')} />\n        </S.FormItem>\n        <BaseForm.Item noStyle>\n          <Auth.SubmitButton type=\"primary\" htmlType=\"submit\" loading={isLoading}>\n            {t('common.login')}\n          </Auth.SubmitButton>\n        </BaseForm.Item>\n      </BaseForm>\n    </Auth.FormWrapper>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}