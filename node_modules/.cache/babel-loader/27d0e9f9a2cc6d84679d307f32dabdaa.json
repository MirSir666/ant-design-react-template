{"ast":null,"code":"import _objectSpread from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from'react';import Stories from'react-insta-stories';import{Col,Row}from'antd';import{LeftOutlined,RightOutlined}from'@ant-design/icons';import{useTranslation}from'react-i18next';import{Carousel}from'@app/components/common/Carousel/Carousel';import{NFTCardHeader}from'@app/components/nft-dashboard/common/NFTCardHeader/NFTCardHeader';import{ViewAll}from'@app/components/nft-dashboard/common/ViewAll/ViewAll';import{TrendingCreatorsStory}from'@app/components/nft-dashboard/trending-creators/story/TrendingCreatorsStory';import{useResponsive}from'@app/hooks/useResponsive';import{getTrendingCreators}from'@app/api/trendingCreators';import*as S from'./TrendingCreators.styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var TrendingCreators=function TrendingCreators(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isStoryOpened=_useState2[0],setStoryOpened=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),storyIndex=_useState4[0],setStoryIndex=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),stories=_useState6[0],setStories=_useState6[1];var _useState7=useState(Math.random()),_useState8=_slicedToArray(_useState7,2),key=_useState8[0],setKey=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),dragging=_useState10[0],setDragging=_useState10[1];var _useResponsive=useResponsive(),isTabletOrHigher=_useResponsive.isTablet;var _useTranslation=useTranslation(),t=_useTranslation.t;var sliderRef=useRef(null);useEffect(function(){getTrendingCreators().then(function(res){return setStories(res);});},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NFTCardHeader,{title:t('nft.trendingCreators'),children:/*#__PURE__*/_jsxs(Row,{align:\"middle\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(ViewAll,{bordered:false})}),isTabletOrHigher&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(S.ArrowBtn,{type:\"text\",size:\"small\",onClick:function onClick(){return sliderRef.current&&sliderRef.current.slickPrev();},children:/*#__PURE__*/_jsx(LeftOutlined,{})})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(S.ArrowBtn,{type:\"text\",size:\"small\",onClick:function onClick(){return sliderRef.current&&sliderRef.current.slickNext();},children:/*#__PURE__*/_jsx(RightOutlined,{})})})]})]})}),stories.length>0&&/*#__PURE__*/_jsx(Carousel,{beforeChange:function beforeChange(){return setDragging(true);},afterChange:function afterChange(){return setDragging(false);},slidesToShow:11,ref:sliderRef,centerMode:false,infinite:false,responsive:[{breakpoint:1920,settings:{slidesToShow:10}},{breakpoint:1870,settings:{slidesToShow:9}},{breakpoint:1700,settings:{slidesToShow:8}},{breakpoint:1530,settings:{slidesToShow:7}},{breakpoint:1370,settings:{slidesToShow:6}},{breakpoint:1279,settings:{slidesToShow:13}},{breakpoint:1200,settings:{slidesToShow:12}},{breakpoint:1120,settings:{slidesToShow:11}},{breakpoint:1020,settings:{slidesToShow:10}},{breakpoint:920,settings:{slidesToShow:9}},{breakpoint:820,settings:{slidesToShow:8}},{breakpoint:767,settings:{slidesToShow:9}},{breakpoint:650,settings:{slidesToShow:8}},{breakpoint:550,settings:{slidesToShow:7}},{breakpoint:500,settings:{slidesToShow:6}},{breakpoint:450,settings:{slidesToShow:5}}],children:stories.map(function(story,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(S.CardWrapper,{children:/*#__PURE__*/_jsx(TrendingCreatorsStory,{img:story.header.profileImage,viewed:story.viewed,onStoryOpen:function onStoryOpen(){if(!dragging){setStoryIndex(index);setStoryOpened(true);}}})})},index);})}),isStoryOpened&&/*#__PURE__*/_jsx(S.StoriesModal,{visible:isStoryOpened,onCancel:function onCancel(){setStories(function(prevStories){return prevStories.sort(function(a,b){return Number(a.viewed)-Number(b.viewed);});});setStoryOpened(false);setKey(Math.random());},footer:null,destroyOnClose:true,maskStyle:{background:'rgba(0, 0, 0, 0.85)'},children:/*#__PURE__*/_jsx(Stories,{currentIndex:storyIndex,stories:stories,defaultInterval:2000,keyboardNavigation:true,width:\"100%\",height:isTabletOrHigher?500:'100vh',onStoryStart:function onStoryStart(storyNumber){setStories(function(prevStories){var storiesCopy=_toConsumableArray(prevStories);storiesCopy.splice(storyNumber,1,_objectSpread(_objectSpread({},prevStories[storyNumber]),{},{viewed:true}));return storiesCopy;});},onAllStoriesEnd:function onAllStoriesEnd(){setStoryOpened(false);}},key)})]});};","map":{"version":3,"names":["React","useEffect","useRef","useState","Stories","Col","Row","LeftOutlined","RightOutlined","useTranslation","Carousel","NFTCardHeader","ViewAll","TrendingCreatorsStory","useResponsive","getTrendingCreators","S","TrendingCreators","isStoryOpened","setStoryOpened","storyIndex","setStoryIndex","stories","setStories","Math","random","key","setKey","dragging","setDragging","isTabletOrHigher","isTablet","t","sliderRef","then","res","current","slickPrev","slickNext","length","breakpoint","settings","slidesToShow","map","story","index","header","profileImage","viewed","prevStories","sort","a","b","Number","background","storyNumber","storiesCopy","splice"],"sources":["/workspace/ant-design-react-template/src/components/nft-dashboard/trending-creators/TrendingCreators.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport Stories from 'react-insta-stories';\nimport Slider from 'react-slick';\nimport { Col, Row } from 'antd';\nimport { LeftOutlined, RightOutlined } from '@ant-design/icons';\nimport { useTranslation } from 'react-i18next';\nimport { Carousel } from '@app/components/common/Carousel/Carousel';\nimport { NFTCardHeader } from '@app/components/nft-dashboard/common/NFTCardHeader/NFTCardHeader';\nimport { ViewAll } from '@app/components/nft-dashboard/common/ViewAll/ViewAll';\nimport { TrendingCreatorsStory } from '@app/components/nft-dashboard/trending-creators/story/TrendingCreatorsStory';\nimport { useResponsive } from '@app/hooks/useResponsive';\nimport { getTrendingCreators, TrendingCreator } from '@app/api/trendingCreators';\nimport * as S from './TrendingCreators.styles';\n\nexport const TrendingCreators: React.FC = () => {\n  const [isStoryOpened, setStoryOpened] = useState(false);\n  const [storyIndex, setStoryIndex] = useState(0);\n  const [stories, setStories] = useState<TrendingCreator[]>([]);\n  const [key, setKey] = useState(Math.random());\n  const [dragging, setDragging] = useState(false);\n\n  const { isTablet: isTabletOrHigher } = useResponsive();\n  const { t } = useTranslation();\n  const sliderRef = useRef<Slider>(null);\n\n  useEffect(() => {\n    getTrendingCreators().then((res) => setStories(res));\n  }, []);\n\n  return (\n    <>\n      <NFTCardHeader title={t('nft.trendingCreators')}>\n        <Row align=\"middle\">\n          <Col>\n            <ViewAll bordered={false} />\n          </Col>\n\n          {isTabletOrHigher && (\n            <>\n              <Col>\n                <S.ArrowBtn type=\"text\" size=\"small\" onClick={() => sliderRef.current && sliderRef.current.slickPrev()}>\n                  <LeftOutlined />\n                </S.ArrowBtn>\n              </Col>\n\n              <Col>\n                <S.ArrowBtn type=\"text\" size=\"small\" onClick={() => sliderRef.current && sliderRef.current.slickNext()}>\n                  <RightOutlined />\n                </S.ArrowBtn>\n              </Col>\n            </>\n          )}\n        </Row>\n      </NFTCardHeader>\n\n      {stories.length > 0 && (\n        <Carousel\n          beforeChange={() => setDragging(true)}\n          afterChange={() => setDragging(false)}\n          slidesToShow={11}\n          ref={sliderRef}\n          centerMode={false}\n          infinite={false}\n          responsive={[\n            {\n              breakpoint: 1920,\n              settings: {\n                slidesToShow: 10,\n              },\n            },\n            {\n              breakpoint: 1870,\n              settings: {\n                slidesToShow: 9,\n              },\n            },\n            {\n              breakpoint: 1700,\n              settings: {\n                slidesToShow: 8,\n              },\n            },\n            {\n              breakpoint: 1530,\n              settings: {\n                slidesToShow: 7,\n              },\n            },\n            {\n              breakpoint: 1370,\n              settings: {\n                slidesToShow: 6,\n              },\n            },\n            {\n              breakpoint: 1279,\n              settings: {\n                slidesToShow: 13,\n              },\n            },\n            {\n              breakpoint: 1200,\n              settings: {\n                slidesToShow: 12,\n              },\n            },\n            {\n              breakpoint: 1120,\n              settings: {\n                slidesToShow: 11,\n              },\n            },\n            {\n              breakpoint: 1020,\n              settings: {\n                slidesToShow: 10,\n              },\n            },\n            {\n              breakpoint: 920,\n              settings: {\n                slidesToShow: 9,\n              },\n            },\n            {\n              breakpoint: 820,\n              settings: {\n                slidesToShow: 8,\n              },\n            },\n            {\n              breakpoint: 767,\n              settings: {\n                slidesToShow: 9,\n              },\n            },\n            {\n              breakpoint: 650,\n              settings: {\n                slidesToShow: 8,\n              },\n            },\n            {\n              breakpoint: 550,\n              settings: {\n                slidesToShow: 7,\n              },\n            },\n            {\n              breakpoint: 500,\n              settings: {\n                slidesToShow: 6,\n              },\n            },\n            {\n              breakpoint: 450,\n              settings: {\n                slidesToShow: 5,\n              },\n            },\n          ]}\n        >\n          {stories.map((story, index) => (\n            <div key={index}>\n              <S.CardWrapper>\n                <TrendingCreatorsStory\n                  img={story.header.profileImage}\n                  viewed={story.viewed}\n                  onStoryOpen={() => {\n                    if (!dragging) {\n                      setStoryIndex(index);\n                      setStoryOpened(true);\n                    }\n                  }}\n                />\n              </S.CardWrapper>\n            </div>\n          ))}\n        </Carousel>\n      )}\n\n      {isStoryOpened && (\n        <S.StoriesModal\n          visible={isStoryOpened}\n          onCancel={() => {\n            setStories((prevStories) =>\n              prevStories.sort((a, b) => {\n                return Number(a.viewed) - Number(b.viewed);\n              }),\n            );\n            setStoryOpened(false);\n            setKey(Math.random());\n          }}\n          footer={null}\n          destroyOnClose\n          maskStyle={{\n            background: 'rgba(0, 0, 0, 0.85)',\n          }}\n        >\n          <Stories\n            key={key}\n            currentIndex={storyIndex}\n            stories={stories}\n            defaultInterval={2000}\n            keyboardNavigation\n            width=\"100%\"\n            height={isTabletOrHigher ? 500 : '100vh'}\n            onStoryStart={(storyNumber: number) => {\n              setStories((prevStories) => {\n                const storiesCopy = [...prevStories];\n                storiesCopy.splice(storyNumber, 1, { ...prevStories[storyNumber], viewed: true });\n\n                return storiesCopy;\n              });\n            }}\n            onAllStoriesEnd={() => {\n              setStoryOpened(false);\n            }}\n          />\n        </S.StoriesModal>\n      )}\n    </>\n  );\n};\n"],"mappings":"qXAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAC1D,MAAOC,QAAO,KAAM,qBAAqB,CAEzC,OAASC,GAAG,CAAEC,GAAG,KAAQ,MAAM,CAC/B,OAASC,YAAY,CAAEC,aAAa,KAAQ,mBAAmB,CAC/D,OAASC,cAAc,KAAQ,eAAe,CAC9C,OAASC,QAAQ,KAAQ,0CAA0C,CACnE,OAASC,aAAa,KAAQ,kEAAkE,CAChG,OAASC,OAAO,KAAQ,sDAAsD,CAC9E,OAASC,qBAAqB,KAAQ,6EAA6E,CACnH,OAASC,aAAa,KAAQ,0BAA0B,CACxD,OAASC,mBAAmB,KAAyB,2BAA2B,CAChF,MAAO,GAAKC,EAAC,KAAM,2BAA2B,CAAC,6IAE/C,MAAO,IAAMC,iBAA0B,CAAG,QAA7BA,iBAA0B,EAAS,CAC9C,cAAwCd,QAAQ,CAAC,KAAK,CAAC,wCAAhDe,aAAa,eAAEC,cAAc,eACpC,eAAoChB,QAAQ,CAAC,CAAC,CAAC,yCAAxCiB,UAAU,eAAEC,aAAa,eAChC,eAA8BlB,QAAQ,CAAoB,EAAE,CAAC,yCAAtDmB,OAAO,eAAEC,UAAU,eAC1B,eAAsBpB,QAAQ,CAACqB,IAAI,CAACC,MAAM,EAAE,CAAC,yCAAtCC,GAAG,eAAEC,MAAM,eAClB,eAAgCxB,QAAQ,CAAC,KAAK,CAAC,0CAAxCyB,QAAQ,gBAAEC,WAAW,gBAE5B,mBAAuCf,aAAa,EAAE,CAApCgB,gBAAgB,gBAA1BC,QAAQ,CAChB,oBAActB,cAAc,EAAE,CAAtBuB,CAAC,iBAADA,CAAC,CACT,GAAMC,UAAS,CAAG/B,MAAM,CAAS,IAAI,CAAC,CAEtCD,SAAS,CAAC,UAAM,CACdc,mBAAmB,EAAE,CAACmB,IAAI,CAAC,SAACC,GAAG,QAAKZ,WAAU,CAACY,GAAG,CAAC,GAAC,CACtD,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,wCACE,KAAC,aAAa,EAAC,KAAK,CAAEH,CAAC,CAAC,sBAAsB,CAAE,uBAC9C,MAAC,GAAG,EAAC,KAAK,CAAC,QAAQ,wBACjB,KAAC,GAAG,wBACF,KAAC,OAAO,EAAC,QAAQ,CAAE,KAAM,EAAG,EACxB,CAELF,gBAAgB,eACf,wCACE,KAAC,GAAG,wBACF,KAAC,CAAC,CAAC,QAAQ,EAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAE,yBAAMG,UAAS,CAACG,OAAO,EAAIH,SAAS,CAACG,OAAO,CAACC,SAAS,EAAE,EAAC,uBACrG,KAAC,YAAY,IAAG,EACL,EACT,cAEN,KAAC,GAAG,wBACF,KAAC,CAAC,CAAC,QAAQ,EAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAE,yBAAMJ,UAAS,CAACG,OAAO,EAAIH,SAAS,CAACG,OAAO,CAACE,SAAS,EAAE,EAAC,uBACrG,KAAC,aAAa,IAAG,EACN,EACT,GAET,GACG,EACQ,CAEfhB,OAAO,CAACiB,MAAM,CAAG,CAAC,eACjB,KAAC,QAAQ,EACP,YAAY,CAAE,8BAAMV,YAAW,CAAC,IAAI,CAAC,EAAC,CACtC,WAAW,CAAE,6BAAMA,YAAW,CAAC,KAAK,CAAC,EAAC,CACtC,YAAY,CAAE,EAAG,CACjB,GAAG,CAAEI,SAAU,CACf,UAAU,CAAE,KAAM,CAClB,QAAQ,CAAE,KAAM,CAChB,UAAU,CAAE,CACV,CACEO,UAAU,CAAE,IAAI,CAChBC,QAAQ,CAAE,CACRC,YAAY,CAAE,EAChB,CACF,CAAC,CACD,CACEF,UAAU,CAAE,IAAI,CAChBC,QAAQ,CAAE,CACRC,YAAY,CAAE,CAChB,CACF,CAAC,CACD,CACEF,UAAU,CAAE,IAAI,CAChBC,QAAQ,CAAE,CACRC,YAAY,CAAE,CAChB,CACF,CAAC,CACD,CACEF,UAAU,CAAE,IAAI,CAChBC,QAAQ,CAAE,CACRC,YAAY,CAAE,CAChB,CACF,CAAC,CACD,CACEF,UAAU,CAAE,IAAI,CAChBC,QAAQ,CAAE,CACRC,YAAY,CAAE,CAChB,CACF,CAAC,CACD,CACEF,UAAU,CAAE,IAAI,CAChBC,QAAQ,CAAE,CACRC,YAAY,CAAE,EAChB,CACF,CAAC,CACD,CACEF,UAAU,CAAE,IAAI,CAChBC,QAAQ,CAAE,CACRC,YAAY,CAAE,EAChB,CACF,CAAC,CACD,CACEF,UAAU,CAAE,IAAI,CAChBC,QAAQ,CAAE,CACRC,YAAY,CAAE,EAChB,CACF,CAAC,CACD,CACEF,UAAU,CAAE,IAAI,CAChBC,QAAQ,CAAE,CACRC,YAAY,CAAE,EAChB,CACF,CAAC,CACD,CACEF,UAAU,CAAE,GAAG,CACfC,QAAQ,CAAE,CACRC,YAAY,CAAE,CAChB,CACF,CAAC,CACD,CACEF,UAAU,CAAE,GAAG,CACfC,QAAQ,CAAE,CACRC,YAAY,CAAE,CAChB,CACF,CAAC,CACD,CACEF,UAAU,CAAE,GAAG,CACfC,QAAQ,CAAE,CACRC,YAAY,CAAE,CAChB,CACF,CAAC,CACD,CACEF,UAAU,CAAE,GAAG,CACfC,QAAQ,CAAE,CACRC,YAAY,CAAE,CAChB,CACF,CAAC,CACD,CACEF,UAAU,CAAE,GAAG,CACfC,QAAQ,CAAE,CACRC,YAAY,CAAE,CAChB,CACF,CAAC,CACD,CACEF,UAAU,CAAE,GAAG,CACfC,QAAQ,CAAE,CACRC,YAAY,CAAE,CAChB,CACF,CAAC,CACD,CACEF,UAAU,CAAE,GAAG,CACfC,QAAQ,CAAE,CACRC,YAAY,CAAE,CAChB,CACF,CAAC,CACD,UAEDpB,OAAO,CAACqB,GAAG,CAAC,SAACC,KAAK,CAAEC,KAAK,qBACxB,kCACE,KAAC,CAAC,CAAC,WAAW,wBACZ,KAAC,qBAAqB,EACpB,GAAG,CAAED,KAAK,CAACE,MAAM,CAACC,YAAa,CAC/B,MAAM,CAAEH,KAAK,CAACI,MAAO,CACrB,WAAW,CAAE,sBAAM,CACjB,GAAI,CAACpB,QAAQ,CAAE,CACbP,aAAa,CAACwB,KAAK,CAAC,CACpB1B,cAAc,CAAC,IAAI,CAAC,CACtB,CACF,CAAE,EACF,EACY,EAZR0B,KAAK,CAaT,EACP,CAAC,EAEL,CAEA3B,aAAa,eACZ,KAAC,CAAC,CAAC,YAAY,EACb,OAAO,CAAEA,aAAc,CACvB,QAAQ,CAAE,mBAAM,CACdK,UAAU,CAAC,SAAC0B,WAAW,QACrBA,YAAW,CAACC,IAAI,CAAC,SAACC,CAAC,CAAEC,CAAC,CAAK,CACzB,MAAOC,OAAM,CAACF,CAAC,CAACH,MAAM,CAAC,CAAGK,MAAM,CAACD,CAAC,CAACJ,MAAM,CAAC,CAC5C,CAAC,CAAC,GACH,CACD7B,cAAc,CAAC,KAAK,CAAC,CACrBQ,MAAM,CAACH,IAAI,CAACC,MAAM,EAAE,CAAC,CACvB,CAAE,CACF,MAAM,CAAE,IAAK,CACb,cAAc,MACd,SAAS,CAAE,CACT6B,UAAU,CAAE,qBACd,CAAE,uBAEF,KAAC,OAAO,EAEN,YAAY,CAAElC,UAAW,CACzB,OAAO,CAAEE,OAAQ,CACjB,eAAe,CAAE,IAAK,CACtB,kBAAkB,MAClB,KAAK,CAAC,MAAM,CACZ,MAAM,CAAEQ,gBAAgB,CAAG,GAAG,CAAG,OAAQ,CACzC,YAAY,CAAE,sBAACyB,WAAmB,CAAK,CACrChC,UAAU,CAAC,SAAC0B,WAAW,CAAK,CAC1B,GAAMO,YAAW,oBAAOP,WAAW,CAAC,CACpCO,WAAW,CAACC,MAAM,CAACF,WAAW,CAAE,CAAC,gCAAON,WAAW,CAACM,WAAW,CAAC,MAAEP,MAAM,CAAE,IAAI,GAAG,CAEjF,MAAOQ,YAAW,CACpB,CAAC,CAAC,CACJ,CAAE,CACF,eAAe,CAAE,0BAAM,CACrBrC,cAAc,CAAC,KAAK,CAAC,CACvB,CAAE,EAjBGO,GAAG,CAkBR,EAEL,GACA,CAEP,CAAC"},"metadata":{},"sourceType":"module"}