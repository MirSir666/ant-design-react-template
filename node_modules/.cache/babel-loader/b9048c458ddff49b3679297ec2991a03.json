{"ast":null,"code":"import _slicedToArray from\"/workspace/lightence-ant-design-react-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useMemo,useState}from'react';import{Col,Row}from'antd';import{useTranslation}from'react-i18next';import{CaretDownOutlined,CaretUpOutlined}from'@ant-design/icons';import{NFTCard}from'@app/components/nft-dashboard/common/NFTCard/NFTCard';import{TotalEarningChart}from'@app/components/nft-dashboard/totalEarning/TotalEarningChart/TotalEarningChart';import{useAppSelector}from'@app/hooks/reduxHooks';import{getTotalEarning}from'@app/api/earnings.api';import{Dates}from'@app/constants/Dates';import{formatNumberWithCommas,getCurrencyPrice,getDifference}from'@app/utils/utils';import*as S from'./TotalEarning.styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var TotalEarning=function TotalEarning(){var _totalEarning$total;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),totalEarning=_useState2[0],setTotalEarning=_useState2[1];var userId=useAppSelector(function(state){var _state$user$user;return(_state$user$user=state.user.user)===null||_state$user$user===void 0?void 0:_state$user$user.id;});var _useTranslation=useTranslation(),t=_useTranslation.t;useEffect(function(){userId&&getTotalEarning(userId,'USD').then(function(res){return setTotalEarning(res);});},[userId]);var _useMemo=useMemo(function(){return{totalEarningData:{data:totalEarning?totalEarning.timeline.map(function(item){return item.usd_value;}):[]},days:totalEarning?totalEarning.timeline.map(function(item){return Dates.getDate(item.date).format('L');}):[]};},[totalEarning]),totalEarningData=_useMemo.totalEarningData,days=_useMemo.days;var isIncreased=Number(totalEarning===null||totalEarning===void 0?void 0:totalEarning.total)>Number(totalEarning===null||totalEarning===void 0?void 0:totalEarning.prevTotal);return/*#__PURE__*/_jsx(NFTCard,{isSider:true,children:/*#__PURE__*/_jsxs(Row,{gutter:[14,14],children:[/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsxs(Row,{wrap:false,justify:\"space-between\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(S.Title,{level:2,children:t('nft.totalEarning')})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(S.ValueText,{$color:isIncreased?'success':'error',children:[isIncreased?/*#__PURE__*/_jsx(CaretUpOutlined,{}):/*#__PURE__*/_jsx(CaretDownOutlined,{}),' ',totalEarning&&getDifference(totalEarning===null||totalEarning===void 0?void 0:totalEarning.total,totalEarning===null||totalEarning===void 0?void 0:totalEarning.prevTotal)]})})]})}),/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsxs(Row,{wrap:false,justify:\"space-between\",gutter:[20,20],children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(S.Text,{children:getCurrencyPrice(formatNumberWithCommas((_totalEarning$total=totalEarning===null||totalEarning===void 0?void 0:totalEarning.total)!==null&&_totalEarning$total!==void 0?_totalEarning$total:0),'USD')})}),/*#__PURE__*/_jsx(Col,{flex:1,children:/*#__PURE__*/_jsx(TotalEarningChart,{xAxisData:days,earningData:totalEarningData})})]})})]})});};","map":{"version":3,"sources":["/workspace/lightence-ant-design-react-template/src/components/nft-dashboard/totalEarning/TotalEarning.tsx"],"names":["React","useEffect","useMemo","useState","Col","Row","useTranslation","CaretDownOutlined","CaretUpOutlined","NFTCard","TotalEarningChart","useAppSelector","getTotalEarning","Dates","formatNumberWithCommas","getCurrencyPrice","getDifference","S","TotalEarning","totalEarning","setTotalEarning","userId","state","user","id","t","then","res","totalEarningData","data","timeline","map","item","usd_value","days","getDate","date","format","isIncreased","Number","total","prevTotal"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { Col, Row } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { CaretDownOutlined, CaretUpOutlined } from '@ant-design/icons';\nimport { NFTCard } from '@app/components/nft-dashboard/common/NFTCard/NFTCard';\nimport { TotalEarningChart } from '@app/components/nft-dashboard/totalEarning/TotalEarningChart/TotalEarningChart';\nimport { useAppSelector } from '@app/hooks/reduxHooks';\nimport { getTotalEarning, TotalEarning as ITotalEarning } from '@app/api/earnings.api';\nimport { Dates } from '@app/constants/Dates';\nimport { formatNumberWithCommas, getCurrencyPrice, getDifference } from '@app/utils/utils';\nimport * as S from './TotalEarning.styles';\n\nexport const TotalEarning: React.FC = () => {\n  const [totalEarning, setTotalEarning] = useState<ITotalEarning | null>(null);\n\n  const userId = useAppSelector((state) => state.user.user?.id);\n\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    userId && getTotalEarning(userId, 'USD').then((res) => setTotalEarning(res));\n  }, [userId]);\n\n  const { totalEarningData, days } = useMemo(\n    () => ({\n      totalEarningData: {\n        data: totalEarning ? totalEarning.timeline.map((item) => item.usd_value) : [],\n      },\n      days: totalEarning ? totalEarning.timeline.map((item) => Dates.getDate(item.date).format('L')) : [],\n    }),\n    [totalEarning],\n  );\n\n  const isIncreased = Number(totalEarning?.total) > Number(totalEarning?.prevTotal);\n\n  return (\n    <NFTCard isSider>\n      <Row gutter={[14, 14]}>\n        <Col span={24}>\n          <Row wrap={false} justify=\"space-between\">\n            <Col>\n              <S.Title level={2}>{t('nft.totalEarning')}</S.Title>\n            </Col>\n\n            <Col>\n              <S.ValueText $color={isIncreased ? 'success' : 'error'}>\n                {isIncreased ? <CaretUpOutlined /> : <CaretDownOutlined />}{' '}\n                {totalEarning && getDifference(totalEarning?.total, totalEarning?.prevTotal)}\n              </S.ValueText>\n            </Col>\n          </Row>\n        </Col>\n\n        <Col span={24}>\n          <Row wrap={false} justify=\"space-between\" gutter={[20, 20]}>\n            <Col>\n              <S.Text>{getCurrencyPrice(formatNumberWithCommas(totalEarning?.total ?? 0), 'USD')}</S.Text>\n            </Col>\n\n            <Col flex={1}>\n              <TotalEarningChart xAxisData={days} earningData={totalEarningData} />\n            </Col>\n          </Row>\n        </Col>\n      </Row>\n    </NFTCard>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}