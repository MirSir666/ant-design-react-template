{"ast":null,"code":"import _classCallCheck from \"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { DEFAULT_FORMAT_CHARACTERS, DEFAULT_PLACEHOLDER_CHAR, ESCAPE_CHAR } from './helpers';\nexport var Pattern = /*#__PURE__*/function () {\n  function Pattern(source, formatCharacters, placeholderChar) {\n    var isRevealingMask = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    _classCallCheck(this, Pattern);\n    /** Pattern characters after escape characters have been processed. */\n    this.pattern = [];\n    /** Length of the pattern after escape characters have been processed. */\n    this.length = 0;\n    /** Index of the first editable character. */\n    this.firstEditableIndex = null;\n    /** Index of the last editable character. */\n    this.lastEditableIndex = null;\n    /** Lookup for indices of editable characters in the pattern. */\n    this._editableIndices = {};\n    /** Placeholder character */\n    this.placeholderChar = placeholderChar || DEFAULT_PLACEHOLDER_CHAR;\n    /** Format character definitions. */\n    this.formatCharacters = formatCharacters || DEFAULT_FORMAT_CHARACTERS;\n    /** Pattern definition string with escape characters. */\n    this.source = source;\n    this.isRevealingMask = isRevealingMask;\n    this._parse();\n  }\n  _createClass(Pattern, [{\n    key: \"_parse\",\n    value: function _parse() {\n      var sourceChars = this.source.split('');\n      var patternIndex = 0;\n      var pattern = [];\n      for (var i = 0, l = sourceChars.length; i < l; i++) {\n        var char = sourceChars[i];\n        if (char === ESCAPE_CHAR) {\n          if (i === l - 1) {\n            throw new Error('InputMask: pattern ends with a raw ' + ESCAPE_CHAR);\n          }\n          char = sourceChars[++i];\n        } else if (char in this.formatCharacters) {\n          if (this.firstEditableIndex === null) {\n            this.firstEditableIndex = patternIndex;\n          }\n          this.lastEditableIndex = patternIndex;\n          this._editableIndices[patternIndex] = true;\n        }\n        pattern.push(char);\n        patternIndex++;\n      }\n      if (this.firstEditableIndex === null) {\n        throw new Error('InputMask: pattern \"' + this.source + '\" does not contain any editable characters.');\n      }\n      // @ts-ignore\n      this.pattern = pattern;\n      this.length = pattern.length;\n    }\n  }, {\n    key: \"formatValue\",\n    value: function formatValue(value) {\n      var valueBuffer = new Array(this.length);\n      var valueIndex = 0;\n      for (var i = 0, l = this.length; i < l; i++) {\n        if (this.isEditableIndex(i)) {\n          if (this.isRevealingMask && value.length <= valueIndex && !this.isValidAtIndex(value[valueIndex], i)) {\n            break;\n          }\n          valueBuffer[i] = value.length > valueIndex && this.isValidAtIndex(value[valueIndex], i) ? this.transform(value[valueIndex], i) : this.placeholderChar;\n          valueIndex++;\n        } else {\n          valueBuffer[i] = this.pattern[i];\n          // Also allow the value to contain static values from the pattern by\n          // advancing its index.\n          if (value.length > valueIndex && value[valueIndex] === this.pattern[i]) {\n            valueIndex++;\n          }\n        }\n      }\n      return valueBuffer;\n    }\n  }, {\n    key: \"isEditableIndex\",\n    value: function isEditableIndex(index) {\n      return !!this._editableIndices[index];\n    }\n  }, {\n    key: \"isValidAtIndex\",\n    value: function isValidAtIndex(char, index) {\n      return this.formatCharacters[this.pattern[index]].validate(char);\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(char, index) {\n      var format = this.formatCharacters[this.pattern[index]];\n      return typeof format.transform == 'function' ? format.transform(char) : char;\n    }\n  }]);\n  return Pattern;\n}();","map":{"version":3,"sources":["../../../src/lib/Pattern.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { DEFAULT_FORMAT_CHARACTERS, DEFAULT_PLACEHOLDER_CHAR, ESCAPE_CHAR, } from './helpers';\nexport class Pattern {\n    constructor(source, formatCharacters, placeholderChar, isRevealingMask = false) {\n        /** Pattern characters after escape characters have been processed. */\n        this.pattern = [];\n        /** Length of the pattern after escape characters have been processed. */\n        this.length = 0;\n        /** Index of the first editable character. */\n        this.firstEditableIndex = null;\n        /** Index of the last editable character. */\n        this.lastEditableIndex = null;\n        /** Lookup for indices of editable characters in the pattern. */\n        this._editableIndices = {};\n        /** Placeholder character */\n        this.placeholderChar = placeholderChar || DEFAULT_PLACEHOLDER_CHAR;\n        /** Format character definitions. */\n        this.formatCharacters = formatCharacters || DEFAULT_FORMAT_CHARACTERS;\n        /** Pattern definition string with escape characters. */\n        this.source = source;\n        this.isRevealingMask = isRevealingMask;\n        this._parse();\n    }\n    _parse() {\n        var sourceChars = this.source.split('');\n        var patternIndex = 0;\n        var pattern = [];\n        for (var i = 0, l = sourceChars.length; i < l; i++) {\n            var char = sourceChars[i];\n            if (char === ESCAPE_CHAR) {\n                if (i === l - 1) {\n                    throw new Error('InputMask: pattern ends with a raw ' + ESCAPE_CHAR);\n                }\n                char = sourceChars[++i];\n            }\n            else if (char in this.formatCharacters) {\n                if (this.firstEditableIndex === null) {\n                    this.firstEditableIndex = patternIndex;\n                }\n                this.lastEditableIndex = patternIndex;\n                this._editableIndices[patternIndex] = true;\n            }\n            pattern.push(char);\n            patternIndex++;\n        }\n        if (this.firstEditableIndex === null) {\n            throw new Error('InputMask: pattern \"' + this.source + '\" does not contain any editable characters.');\n        }\n        // @ts-ignore\n        this.pattern = pattern;\n        this.length = pattern.length;\n    }\n    formatValue(value) {\n        var valueBuffer = new Array(this.length);\n        var valueIndex = 0;\n        for (var i = 0, l = this.length; i < l; i++) {\n            if (this.isEditableIndex(i)) {\n                if (this.isRevealingMask &&\n                    value.length <= valueIndex &&\n                    !this.isValidAtIndex(value[valueIndex], i)) {\n                    break;\n                }\n                valueBuffer[i] =\n                    value.length > valueIndex && this.isValidAtIndex(value[valueIndex], i)\n                        ? this.transform(value[valueIndex], i)\n                        : this.placeholderChar;\n                valueIndex++;\n            }\n            else {\n                valueBuffer[i] = this.pattern[i];\n                // Also allow the value to contain static values from the pattern by\n                // advancing its index.\n                if (value.length > valueIndex && value[valueIndex] === this.pattern[i]) {\n                    valueIndex++;\n                }\n            }\n        }\n        return valueBuffer;\n    }\n    isEditableIndex(index) {\n        return !!this._editableIndices[index];\n    }\n    isValidAtIndex(char, index) {\n        return this.formatCharacters[this.pattern[index]].validate(char);\n    }\n    transform(char, index) {\n        var format = this.formatCharacters[this.pattern[index]];\n        return typeof format.transform == 'function' ? format.transform(char) : char;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGF0dGVybi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvUGF0dGVybi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wseUJBQXlCLEVBQ3pCLHdCQUF3QixFQUN4QixXQUFXLEdBRVosTUFBTSxXQUFXLENBQUM7QUFFbkIsTUFBTSxPQUFPLE9BQU87SUF1QmxCLFlBQ0UsTUFBYyxFQUNkLGdCQUFrQyxFQUNsQyxlQUF1QixFQUN2QixlQUFlLEdBQUcsS0FBSztRQXRCekIsc0VBQXNFO1FBQ3RFLFlBQU8sR0FBRyxFQUFFLENBQUM7UUFFYix5RUFBeUU7UUFDekUsV0FBTSxHQUFHLENBQUMsQ0FBQztRQUVYLDZDQUE2QztRQUM3Qyx1QkFBa0IsR0FBa0IsSUFBSSxDQUFDO1FBRXpDLDRDQUE0QztRQUM1QyxzQkFBaUIsR0FBa0IsSUFBSSxDQUFDO1FBRXhDLGdFQUFnRTtRQUNoRSxxQkFBZ0IsR0FBK0IsRUFBRSxDQUFDO1FBV2hELDRCQUE0QjtRQUM1QixJQUFJLENBQUMsZUFBZSxHQUFHLGVBQWUsSUFBSSx3QkFBd0IsQ0FBQztRQUNuRSxvQ0FBb0M7UUFDcEMsSUFBSSxDQUFDLGdCQUFnQixHQUFHLGdCQUFnQixJQUFJLHlCQUF5QixDQUFDO1FBQ3RFLHdEQUF3RDtRQUN4RCxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUVyQixJQUFJLENBQUMsZUFBZSxHQUFHLGVBQWUsQ0FBQztRQUV2QyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEIsQ0FBQztJQUVELE1BQU07UUFDSixJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN4QyxJQUFJLFlBQVksR0FBRyxDQUFDLENBQUM7UUFDckIsSUFBSSxPQUFPLEdBQWEsRUFBRSxDQUFDO1FBRTNCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FB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"]},"metadata":{},"sourceType":"module"}