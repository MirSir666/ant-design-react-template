{"ast":null,"code":"import _taggedTemplateLiteral from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _slicedToArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3;import React,{useEffect,useState}from'react';import{useTranslation}from'react-i18next';import{useResponsive}from'hooks/useResponsive';import{TreatmentCalendar}from'./TreatmentCalendar/TreatmentCalendar';import{TreatmentPanel}from'./TreatmentPanel';import{Dates}from'constants/Dates';import{Col,Row}from'antd';import{DashboardCard}from'../DashboardCard/DashboardCard';import{getUserCalendar}from'api/calendar.api';import{ArrowLeftOutlined}from'@ant-design/icons';import styled from'styled-components';import{Button}from'../../common/buttons/Button/Button';import{useAppSelector}from'@app/hooks/reduxHooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var TreatmentCard=function TreatmentCard(){var _useResponsive=useResponsive(),isTablet=_useResponsive.isTablet;var _useState=useState(Dates.getToday()),_useState2=_slicedToArray(_useState,2),selectedDate=_useState2[0],setDate=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isDateClicked=_useState4[0],setDateClicked=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),calendar=_useState6[0],setCalendar=_useState6[1];var user=useAppSelector(function(state){return state.user.user;});useEffect(function(){user&&getUserCalendar(user===null||user===void 0?void 0:user.id).then(function(res){return setCalendar(res);});},[user]);var _useTranslation=useTranslation(),i18n=_useTranslation.i18n,t=_useTranslation.t;useEffect(function(){setDate(function(selectedDate){return selectedDate.locale(i18n.language);});},[i18n.language]);var handleDecreaseMonth=function handleDecreaseMonth(){setDate(selectedDate.month(selectedDate.month()-1));};var handleIncreaseMonth=function handleIncreaseMonth(){setDate(selectedDate.month(selectedDate.month()+1));};var handleToday=function handleToday(){setDate(Dates.getToday());};var calendarItem=/*#__PURE__*/_jsx(TreatmentCalendar,{calendar:calendar,date:selectedDate,setDate:setDate,onDecrease:handleDecreaseMonth,onIncrease:handleIncreaseMonth,onToday:handleToday,setDateClicked:setDateClicked});var currentEvent=calendar.find(function(event){return Dates.getDate(event.date).isSame(selectedDate,'date');});var panelItem=/*#__PURE__*/_jsx(TreatmentPanel,{event:currentEvent});return/*#__PURE__*/_jsx(DashboardCard,{title:t('medical-dashboard.treatmentPlan.title'),children:/*#__PURE__*/_jsx(RowStyled,{gutter:[10,10],wrap:false,children:isTablet?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Col,{md:12,children:calendarItem}),/*#__PURE__*/_jsx(Col,{md:12,children:panelItem})]}):isDateClicked&&calendar.some(function(event){return Dates.getDate(event.date).isSame(selectedDate,'date');})?/*#__PURE__*/_jsxs(BackButtonWrapper,{span:24,children:[panelItem,/*#__PURE__*/_jsx(BackButton,{type:\"text\",icon:/*#__PURE__*/_jsx(ArrowLeftOutlined,{}),onClick:function onClick(){return setDateClicked(false);}})]}):/*#__PURE__*/_jsx(Col,{span:24,children:calendarItem})})});};var BackButtonWrapper=styled(Col)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  position: relative;\\n\"])));var BackButton=styled(Button)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  color: var(--white);\\n\"])));var RowStyled=styled(Row)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  min-height: 21.75rem;\\n\"])));","map":{"version":3,"names":["React","useEffect","useState","useTranslation","useResponsive","TreatmentCalendar","TreatmentPanel","Dates","Col","Row","DashboardCard","getUserCalendar","ArrowLeftOutlined","styled","Button","useAppSelector","TreatmentCard","isTablet","getToday","selectedDate","setDate","isDateClicked","setDateClicked","calendar","setCalendar","user","state","id","then","res","i18n","t","locale","language","handleDecreaseMonth","month","handleIncreaseMonth","handleToday","calendarItem","currentEvent","find","event","getDate","date","isSame","panelItem","some","BackButtonWrapper","BackButton","RowStyled"],"sources":["/workspace/ant-design-react-template/src/components/medical-dashboard/treatmentCard/TreatmentCard.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useResponsive } from 'hooks/useResponsive';\nimport { TreatmentCalendar } from './TreatmentCalendar/TreatmentCalendar';\nimport { TreatmentPanel } from './TreatmentPanel';\nimport { AppDate, Dates } from 'constants/Dates';\nimport { Col, Row } from 'antd';\nimport { DashboardCard } from '../DashboardCard/DashboardCard';\nimport { CalendarEvent, getUserCalendar } from 'api/calendar.api';\nimport { ArrowLeftOutlined } from '@ant-design/icons';\nimport styled from 'styled-components';\nimport { Button } from '../../common/buttons/Button/Button';\nimport { useAppSelector } from '@app/hooks/reduxHooks';\n\nexport const TreatmentCard: React.FC = () => {\n  const { isTablet } = useResponsive();\n\n  const [selectedDate, setDate] = useState<AppDate>(Dates.getToday());\n  const [isDateClicked, setDateClicked] = useState(false);\n  const [calendar, setCalendar] = useState<CalendarEvent[]>([]);\n\n  const user = useAppSelector((state) => state.user.user);\n\n  useEffect(() => {\n    user && getUserCalendar(user?.id).then((res) => setCalendar(res));\n  }, [user]);\n\n  const { i18n, t } = useTranslation();\n\n  useEffect(() => {\n    setDate((selectedDate) => selectedDate.locale(i18n.language));\n  }, [i18n.language]);\n\n  const handleDecreaseMonth = () => {\n    setDate(selectedDate.month(selectedDate.month() - 1));\n  };\n\n  const handleIncreaseMonth = () => {\n    setDate(selectedDate.month(selectedDate.month() + 1));\n  };\n\n  const handleToday = () => {\n    setDate(Dates.getToday());\n  };\n\n  const calendarItem = (\n    <TreatmentCalendar\n      calendar={calendar}\n      date={selectedDate}\n      setDate={setDate}\n      onDecrease={handleDecreaseMonth}\n      onIncrease={handleIncreaseMonth}\n      onToday={handleToday}\n      setDateClicked={setDateClicked}\n    />\n  );\n\n  const currentEvent = calendar.find((event) => Dates.getDate(event.date).isSame(selectedDate, 'date'));\n\n  const panelItem = <TreatmentPanel event={currentEvent} />;\n\n  return (\n    <DashboardCard title={t('medical-dashboard.treatmentPlan.title')}>\n      <RowStyled gutter={[10, 10]} wrap={false}>\n        {isTablet ? (\n          <>\n            <Col md={12}>{calendarItem}</Col>\n            <Col md={12}>{panelItem}</Col>\n          </>\n        ) : isDateClicked && calendar.some((event) => Dates.getDate(event.date).isSame(selectedDate, 'date')) ? (\n          <BackButtonWrapper span={24}>\n            {panelItem}\n            <BackButton type=\"text\" icon={<ArrowLeftOutlined />} onClick={() => setDateClicked(false)} />\n          </BackButtonWrapper>\n        ) : (\n          <Col span={24}>{calendarItem}</Col>\n        )}\n      </RowStyled>\n    </DashboardCard>\n  );\n};\n\nconst BackButtonWrapper = styled(Col)`\n  position: relative;\n`;\n\nconst BackButton = styled(Button)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  color: var(--white);\n`;\n\nconst RowStyled = styled(Row)`\n  min-height: 21.75rem;\n`;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}