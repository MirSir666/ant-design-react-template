{"ast":null,"code":"import _objectSpread from\"/workspace/lightence-ant-design-react-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/workspace/lightence-ant-design-react-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useCallback}from'react';import{Col,Row,Space}from'antd';import{getBasicTableData}from'api/table.api';import{Table}from'components/common/Table/Table';import{Button}from'components/common/buttons/Button/Button';import{useTranslation}from'react-i18next';import{defineColorByPriority}from'@app/utils/utils';import{notificationController}from'controllers/notificationController';import{Status}from'@app/components/profile/profileCard/profileFormNav/nav/payments/paymentHistory/Status/Status';import{useMounted}from'@app/hooks/useMounted';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialPagination={current:1,pageSize:5};export var BasicTable=function BasicTable(){var _useState=useState({data:[],pagination:initialPagination,loading:false}),_useState2=_slicedToArray(_useState,2),tableData=_useState2[0],setTableData=_useState2[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var _useMounted=useMounted(),isMounted=_useMounted.isMounted;var fetch=useCallback(function(pagination){setTableData(function(tableData){return _objectSpread(_objectSpread({},tableData),{},{loading:true});});getBasicTableData(pagination).then(function(res){if(isMounted.current){setTableData({data:res.data,pagination:res.pagination,loading:false});}});},[isMounted]);useEffect(function(){fetch(initialPagination);},[fetch]);var handleTableChange=function handleTableChange(pagination){fetch(pagination);};var handleDeleteRow=function handleDeleteRow(rowId){setTableData(_objectSpread(_objectSpread({},tableData),{},{data:tableData.data.filter(function(item){return item.key!==rowId;}),pagination:_objectSpread(_objectSpread({},tableData.pagination),{},{total:tableData.pagination.total?tableData.pagination.total-1:tableData.pagination.total})}));};var columns=[{title:t('common.name'),dataIndex:'name',render:function render(text){return/*#__PURE__*/_jsx(\"span\",{children:text});},filterMode:'tree',filterSearch:true,filters:[{text:t('common.firstName'),value:'firstName',children:[{text:'Joe',value:'Joe'},{text:'Pavel',value:'Pavel'},{text:'Jim',value:'Jim'},{text:'Josh',value:'Josh'}]},{text:t('common.lastName'),value:'lastName',children:[{text:'Green',value:'Green'},{text:'Black',value:'Black'},{text:'Brown',value:'Brown'}]}],onFilter:function onFilter(value,record){return record.name.includes(value.toString());}},{title:t('common.age'),dataIndex:'age',sorter:function sorter(a,b){return a.age-b.age;},showSorterTooltip:false},{title:t('common.address'),dataIndex:'address'},{title:t('common.tags'),key:'tags',dataIndex:'tags',render:function render(tags){return/*#__PURE__*/_jsx(Row,{gutter:[10,10],children:tags.map(function(tag){return/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Status,{color:defineColorByPriority(tag.priority),text:tag.value.toUpperCase()})},tag.value);})});}},{title:t('tables.actions'),dataIndex:'actions',width:'15%',render:function render(text,record){return/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{type:\"ghost\",onClick:function onClick(){notificationController.info({message:t('tables.inviteMessage',{name:record.name})});},children:t('tables.invite')}),/*#__PURE__*/_jsx(Button,{type:\"default\",danger:true,onClick:function onClick(){return handleDeleteRow(record.key);},children:t('tables.delete')})]});}}];return/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:tableData.data,pagination:tableData.pagination,loading:tableData.loading,onChange:handleTableChange,scroll:{x:800},bordered:true});};","map":{"version":3,"sources":["/workspace/lightence-ant-design-react-template/src/components/tables/BasicTable/BasicTable.tsx"],"names":["React","useEffect","useState","useCallback","Col","Row","Space","getBasicTableData","Table","Button","useTranslation","defineColorByPriority","notificationController","Status","useMounted","initialPagination","current","pageSize","BasicTable","data","pagination","loading","tableData","setTableData","t","isMounted","fetch","then","res","handleTableChange","handleDeleteRow","rowId","filter","item","key","total","columns","title","dataIndex","render","text","filterMode","filterSearch","filters","value","children","onFilter","record","name","includes","toString","sorter","a","b","age","showSorterTooltip","tags","map","tag","priority","toUpperCase","width","info","message","x"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { Col, Row, Space, TablePaginationConfig } from 'antd';\nimport { BasicTableRow, getBasicTableData, Pagination, Tag } from 'api/table.api';\nimport { Table } from 'components/common/Table/Table';\nimport { ColumnsType } from 'antd/es/table';\nimport { Button } from 'components/common/buttons/Button/Button';\nimport { useTranslation } from 'react-i18next';\nimport { defineColorByPriority } from '@app/utils/utils';\nimport { notificationController } from 'controllers/notificationController';\nimport { Status } from '@app/components/profile/profileCard/profileFormNav/nav/payments/paymentHistory/Status/Status';\nimport { useMounted } from '@app/hooks/useMounted';\n\nconst initialPagination: Pagination = {\n  current: 1,\n  pageSize: 5,\n};\n\nexport const BasicTable: React.FC = () => {\n  const [tableData, setTableData] = useState<{ data: BasicTableRow[]; pagination: Pagination; loading: boolean }>({\n    data: [],\n    pagination: initialPagination,\n    loading: false,\n  });\n  const { t } = useTranslation();\n  const { isMounted } = useMounted();\n\n  const fetch = useCallback(\n    (pagination: Pagination) => {\n      setTableData((tableData) => ({ ...tableData, loading: true }));\n      getBasicTableData(pagination).then((res) => {\n        if (isMounted.current) {\n          setTableData({ data: res.data, pagination: res.pagination, loading: false });\n        }\n      });\n    },\n    [isMounted],\n  );\n\n  useEffect(() => {\n    fetch(initialPagination);\n  }, [fetch]);\n\n  const handleTableChange = (pagination: TablePaginationConfig) => {\n    fetch(pagination);\n  };\n\n  const handleDeleteRow = (rowId: number) => {\n    setTableData({\n      ...tableData,\n      data: tableData.data.filter((item) => item.key !== rowId),\n      pagination: {\n        ...tableData.pagination,\n        total: tableData.pagination.total ? tableData.pagination.total - 1 : tableData.pagination.total,\n      },\n    });\n  };\n\n  const columns: ColumnsType<BasicTableRow> = [\n    {\n      title: t('common.name'),\n      dataIndex: 'name',\n      render: (text: string) => <span>{text}</span>,\n      filterMode: 'tree',\n      filterSearch: true,\n      filters: [\n        {\n          text: t('common.firstName'),\n          value: 'firstName',\n          children: [\n            {\n              text: 'Joe',\n              value: 'Joe',\n            },\n            {\n              text: 'Pavel',\n              value: 'Pavel',\n            },\n            {\n              text: 'Jim',\n              value: 'Jim',\n            },\n            {\n              text: 'Josh',\n              value: 'Josh',\n            },\n          ],\n        },\n        {\n          text: t('common.lastName'),\n          value: 'lastName',\n          children: [\n            {\n              text: 'Green',\n              value: 'Green',\n            },\n            {\n              text: 'Black',\n              value: 'Black',\n            },\n            {\n              text: 'Brown',\n              value: 'Brown',\n            },\n          ],\n        },\n      ],\n      onFilter: (value: string | number | boolean, record: BasicTableRow) => record.name.includes(value.toString()),\n    },\n    {\n      title: t('common.age'),\n      dataIndex: 'age',\n      sorter: (a: BasicTableRow, b: BasicTableRow) => a.age - b.age,\n      showSorterTooltip: false,\n    },\n    {\n      title: t('common.address'),\n      dataIndex: 'address',\n    },\n    {\n      title: t('common.tags'),\n      key: 'tags',\n      dataIndex: 'tags',\n      render: (tags: Tag[]) => (\n        <Row gutter={[10, 10]}>\n          {tags.map((tag: Tag) => {\n            return (\n              <Col key={tag.value}>\n                <Status color={defineColorByPriority(tag.priority)} text={tag.value.toUpperCase()} />\n              </Col>\n            );\n          })}\n        </Row>\n      ),\n    },\n    {\n      title: t('tables.actions'),\n      dataIndex: 'actions',\n      width: '15%',\n      render: (text: string, record: { name: string; key: number }) => {\n        return (\n          <Space>\n            <Button\n              type=\"ghost\"\n              onClick={() => {\n                notificationController.info({ message: t('tables.inviteMessage', { name: record.name }) });\n              }}\n            >\n              {t('tables.invite')}\n            </Button>\n            <Button type=\"default\" danger onClick={() => handleDeleteRow(record.key)}>\n              {t('tables.delete')}\n            </Button>\n          </Space>\n        );\n      },\n    },\n  ];\n\n  return (\n    <Table\n      columns={columns}\n      dataSource={tableData.data}\n      pagination={tableData.pagination}\n      loading={tableData.loading}\n      onChange={handleTableChange}\n      scroll={{ x: 800 }}\n      bordered\n    />\n  );\n};\n"]},"metadata":{},"sourceType":"module"}