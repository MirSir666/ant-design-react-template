{"ast":null,"code":"import _regeneratorRuntime from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{Dates}from'@app/constants/Dates';import{useCallback,useEffect,useMemo}from'react';import{useTranslation}from'react-i18next';var localLanguage=localStorage.getItem('lng')||'cn';export var useLanguage=function useLanguage(){var _useTranslation=useTranslation(),i18n=_useTranslation.i18n;var handleChangeLanguage=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(locale){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Dates.setLocale(locale);localStorage.setItem('lng',locale);_context.next=4;return i18n.changeLanguage(locale);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[i18n]);useEffect(function(){localLanguage&&handleChangeLanguage(localLanguage);},[handleChangeLanguage]);return useMemo(function(){return{language:i18n.language,setLanguage:handleChangeLanguage};},[handleChangeLanguage,i18n.language]);};","map":{"version":3,"names":["Dates","useCallback","useEffect","useMemo","useTranslation","localLanguage","localStorage","getItem","useLanguage","i18n","handleChangeLanguage","locale","setLocale","setItem","changeLanguage","language","setLanguage"],"sources":["/workspace/ant-design-react-template/src/hooks/useLanguage.ts"],"sourcesContent":["import { Dates } from '@app/constants/Dates';\nimport { LanguageType } from '@app/interfaces/interfaces';\nimport { useCallback, useEffect, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nconst localLanguage = (localStorage.getItem('lng') as LanguageType) || 'cn';\n\nexport const useLanguage = (): { language: LanguageType; setLanguage: (locale: LanguageType) => Promise<void> } => {\n  const { i18n } = useTranslation();\n\n  const handleChangeLanguage = useCallback(\n    async (locale: LanguageType) => {\n      Dates.setLocale(locale);\n      localStorage.setItem('lng', locale);\n      await i18n.changeLanguage(locale);\n    },\n    [i18n],\n  );\n\n  useEffect(() => {\n    localLanguage && handleChangeLanguage(localLanguage);\n  }, [handleChangeLanguage]);\n\n  return useMemo(\n    () => ({ language: i18n.language as LanguageType, setLanguage: handleChangeLanguage }),\n    [handleChangeLanguage, i18n.language],\n  );\n};\n"],"mappings":"oQAAA,OAASA,KAAK,KAAQ,sBAAsB,CAE5C,OAASC,WAAW,CAAEC,SAAS,CAAEC,OAAO,KAAQ,OAAO,CACvD,OAASC,cAAc,KAAQ,eAAe,CAE9C,GAAMC,cAAa,CAAIC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC,EAAqB,IAAI,CAE3E,MAAO,IAAMC,YAAW,CAAG,QAAdA,YAAW,EAA2F,CACjH,oBAAiBJ,cAAc,EAAE,CAAzBK,IAAI,iBAAJA,IAAI,CAEZ,GAAMC,qBAAoB,CAAGT,WAAW,4FACtC,iBAAOU,MAAoB,oHACzBX,KAAK,CAACY,SAAS,CAACD,MAAM,CAAC,CACvBL,YAAY,CAACO,OAAO,CAAC,KAAK,CAAEF,MAAM,CAAC,CAAC,sBAC9BF,KAAI,CAACK,cAAc,CAACH,MAAM,CAAC,uDAClC,+DACD,CAACF,IAAI,CAAC,CACP,CAEDP,SAAS,CAAC,UAAM,CACdG,aAAa,EAAIK,oBAAoB,CAACL,aAAa,CAAC,CACtD,CAAC,CAAE,CAACK,oBAAoB,CAAC,CAAC,CAE1B,MAAOP,QAAO,CACZ,iBAAO,CAAEY,QAAQ,CAAEN,IAAI,CAACM,QAAwB,CAAEC,WAAW,CAAEN,oBAAqB,CAAC,EAAC,CACtF,CAACA,oBAAoB,CAAED,IAAI,CAACM,QAAQ,CAAC,CACtC,CACH,CAAC"},"metadata":{},"sourceType":"module"}