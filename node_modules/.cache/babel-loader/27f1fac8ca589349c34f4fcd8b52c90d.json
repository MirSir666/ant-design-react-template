{"ast":null,"code":"import _objectSpread from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useCallback}from'react';import{Col,Row,Space}from'antd';import{getBasicTableData}from'api/table.api';import{Table}from'components/common/Table/Table';import{Button}from'components/common/buttons/Button/Button';import{useTranslation}from'react-i18next';import{defineColorByPriority}from'@app/utils/utils';import{notificationController}from'controllers/notificationController';import{Status}from'@app/components/profile/profileCard/profileFormNav/nav/payments/paymentHistory/Status/Status';import{useMounted}from'@app/hooks/useMounted';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialPagination={current:1,pageSize:5};export var BasicTable=function BasicTable(){var _useState=useState({data:[],pagination:initialPagination,loading:false}),_useState2=_slicedToArray(_useState,2),tableData=_useState2[0],setTableData=_useState2[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var _useMounted=useMounted(),isMounted=_useMounted.isMounted;var fetch=useCallback(function(pagination){setTableData(function(tableData){return _objectSpread(_objectSpread({},tableData),{},{loading:true});});getBasicTableData(pagination).then(function(res){if(isMounted.current){setTableData({data:res.data,pagination:res.pagination,loading:false});}});},[isMounted]);useEffect(function(){fetch(initialPagination);},[fetch]);var handleTableChange=function handleTableChange(pagination){fetch(pagination);};var handleDeleteRow=function handleDeleteRow(rowId){setTableData(_objectSpread(_objectSpread({},tableData),{},{data:tableData.data.filter(function(item){return item.key!==rowId;}),pagination:_objectSpread(_objectSpread({},tableData.pagination),{},{total:tableData.pagination.total?tableData.pagination.total-1:tableData.pagination.total})}));};var columns=[{title:t('common.name'),dataIndex:'name',render:function render(text){return/*#__PURE__*/_jsx(\"span\",{children:text});},filterMode:'tree',filterSearch:true,filters:[{text:t('common.firstName'),value:'firstName',children:[{text:'Joe',value:'Joe'},{text:'Pavel',value:'Pavel'},{text:'Jim',value:'Jim'},{text:'Josh',value:'Josh'}]},{text:t('common.lastName'),value:'lastName',children:[{text:'Green',value:'Green'},{text:'Black',value:'Black'},{text:'Brown',value:'Brown'}]}],onFilter:function onFilter(value,record){return record.name.includes(value.toString());}},{title:t('common.age'),dataIndex:'age',sorter:function sorter(a,b){return a.age-b.age;},showSorterTooltip:false},{title:t('common.address'),dataIndex:'address'},{title:t('common.tags'),key:'tags',dataIndex:'tags',render:function render(tags){return/*#__PURE__*/_jsx(Row,{gutter:[10,10],children:tags.map(function(tag){return/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Status,{color:defineColorByPriority(tag.priority),text:tag.value.toUpperCase()})},tag.value);})});}},{title:t('tables.actions'),dataIndex:'actions',width:'15%',render:function render(text,record){return/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{type:\"ghost\",onClick:function onClick(){notificationController.info({message:t('tables.inviteMessage',{name:record.name})});},children:t('tables.invite')}),/*#__PURE__*/_jsx(Button,{type:\"default\",danger:true,onClick:function onClick(){return handleDeleteRow(record.key);},children:t('tables.delete')})]});}}];return/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:tableData.data,pagination:tableData.pagination,loading:tableData.loading,onChange:handleTableChange,scroll:{x:800},bordered:true});};","map":{"version":3,"names":["React","useEffect","useState","useCallback","Col","Row","Space","getBasicTableData","Table","Button","useTranslation","defineColorByPriority","notificationController","Status","useMounted","initialPagination","current","pageSize","BasicTable","data","pagination","loading","tableData","setTableData","t","isMounted","fetch","then","res","handleTableChange","handleDeleteRow","rowId","filter","item","key","total","columns","title","dataIndex","render","text","filterMode","filterSearch","filters","value","children","onFilter","record","name","includes","toString","sorter","a","b","age","showSorterTooltip","tags","map","tag","priority","toUpperCase","width","info","message","x"],"sources":["/workspace/ant-design-react-template/src/components/tables/BasicTable/BasicTable.tsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { Col, Row, Space, TablePaginationConfig } from 'antd';\nimport { BasicTableRow, getBasicTableData, Pagination, Tag } from 'api/table.api';\nimport { Table } from 'components/common/Table/Table';\nimport { ColumnsType } from 'antd/es/table';\nimport { Button } from 'components/common/buttons/Button/Button';\nimport { useTranslation } from 'react-i18next';\nimport { defineColorByPriority } from '@app/utils/utils';\nimport { notificationController } from 'controllers/notificationController';\nimport { Status } from '@app/components/profile/profileCard/profileFormNav/nav/payments/paymentHistory/Status/Status';\nimport { useMounted } from '@app/hooks/useMounted';\n\nconst initialPagination: Pagination = {\n  current: 1,\n  pageSize: 5,\n};\n\nexport const BasicTable: React.FC = () => {\n  const [tableData, setTableData] = useState<{ data: BasicTableRow[]; pagination: Pagination; loading: boolean }>({\n    data: [],\n    pagination: initialPagination,\n    loading: false,\n  });\n  const { t } = useTranslation();\n  const { isMounted } = useMounted();\n\n  const fetch = useCallback(\n    (pagination: Pagination) => {\n      setTableData((tableData) => ({ ...tableData, loading: true }));\n      getBasicTableData(pagination).then((res) => {\n        if (isMounted.current) {\n          setTableData({ data: res.data, pagination: res.pagination, loading: false });\n        }\n      });\n    },\n    [isMounted],\n  );\n\n  useEffect(() => {\n    fetch(initialPagination);\n  }, [fetch]);\n\n  const handleTableChange = (pagination: TablePaginationConfig) => {\n    fetch(pagination);\n  };\n\n  const handleDeleteRow = (rowId: number) => {\n    setTableData({\n      ...tableData,\n      data: tableData.data.filter((item) => item.key !== rowId),\n      pagination: {\n        ...tableData.pagination,\n        total: tableData.pagination.total ? tableData.pagination.total - 1 : tableData.pagination.total,\n      },\n    });\n  };\n\n  const columns: ColumnsType<BasicTableRow> = [\n    {\n      title: t('common.name'),\n      dataIndex: 'name',\n      render: (text: string) => <span>{text}</span>,\n      filterMode: 'tree',\n      filterSearch: true,\n      filters: [\n        {\n          text: t('common.firstName'),\n          value: 'firstName',\n          children: [\n            {\n              text: 'Joe',\n              value: 'Joe',\n            },\n            {\n              text: 'Pavel',\n              value: 'Pavel',\n            },\n            {\n              text: 'Jim',\n              value: 'Jim',\n            },\n            {\n              text: 'Josh',\n              value: 'Josh',\n            },\n          ],\n        },\n        {\n          text: t('common.lastName'),\n          value: 'lastName',\n          children: [\n            {\n              text: 'Green',\n              value: 'Green',\n            },\n            {\n              text: 'Black',\n              value: 'Black',\n            },\n            {\n              text: 'Brown',\n              value: 'Brown',\n            },\n          ],\n        },\n      ],\n      onFilter: (value: string | number | boolean, record: BasicTableRow) => record.name.includes(value.toString()),\n    },\n    {\n      title: t('common.age'),\n      dataIndex: 'age',\n      sorter: (a: BasicTableRow, b: BasicTableRow) => a.age - b.age,\n      showSorterTooltip: false,\n    },\n    {\n      title: t('common.address'),\n      dataIndex: 'address',\n    },\n    {\n      title: t('common.tags'),\n      key: 'tags',\n      dataIndex: 'tags',\n      render: (tags: Tag[]) => (\n        <Row gutter={[10, 10]}>\n          {tags.map((tag: Tag) => {\n            return (\n              <Col key={tag.value}>\n                <Status color={defineColorByPriority(tag.priority)} text={tag.value.toUpperCase()} />\n              </Col>\n            );\n          })}\n        </Row>\n      ),\n    },\n    {\n      title: t('tables.actions'),\n      dataIndex: 'actions',\n      width: '15%',\n      render: (text: string, record: { name: string; key: number }) => {\n        return (\n          <Space>\n            <Button\n              type=\"ghost\"\n              onClick={() => {\n                notificationController.info({ message: t('tables.inviteMessage', { name: record.name }) });\n              }}\n            >\n              {t('tables.invite')}\n            </Button>\n            <Button type=\"default\" danger onClick={() => handleDeleteRow(record.key)}>\n              {t('tables.delete')}\n            </Button>\n          </Space>\n        );\n      },\n    },\n  ];\n\n  return (\n    <Table\n      columns={columns}\n      dataSource={tableData.data}\n      pagination={tableData.pagination}\n      loading={tableData.loading}\n      onChange={handleTableChange}\n      scroll={{ x: 800 }}\n      bordered\n    />\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}