{"ast":null,"code":"import _slicedToArray from\"/workspace/lightence-ant-design-react-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useLocation}from'react-router';import{SearchDropdown}from'../searchDropdown/SearchDropdown';import{Button}from'@app/components/common/buttons/Button/Button';import{components as configComponents}from'@app/constants/config/components';import{categoriesList}from'@app/constants/categoriesList';import{useResponsive}from'@app/hooks/useResponsive';import*as S from'./HeaderSearch.styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var HeaderSearch=function HeaderSearch(){var _useResponsive=useResponsive(),mobileOnly=_useResponsive.mobileOnly,isTablet=_useResponsive.isTablet;var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState(configComponents),_useState4=_slicedToArray(_useState3,1),components=_useState4[0];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isModalVisible=_useState6[0],setModalVisible=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isOverlayVisible=_useState8[0],setOverlayVisible=_useState8[1];var sortedResults=query?categoriesList.reduce(function(acc,current){var searchResults=components.filter(function(component){return component.categories.includes(current.name)&&component.keywords.some(function(keyword){return keyword.includes(query);});});return searchResults.length>0?acc.concat({category:current.name,components:searchResults}):acc;},[]):null;useEffect(function(){setModalVisible(false);setOverlayVisible(false);},[pathname]);return/*#__PURE__*/_jsxs(_Fragment,{children:[mobileOnly&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{type:isModalVisible?'ghost':'text',icon:/*#__PURE__*/_jsx(S.SearchIcon,{onClick:function onClick(){return setModalVisible(true);}})}),/*#__PURE__*/_jsx(S.SearchModal,{visible:isModalVisible,closable:false,footer:null,onCancel:function onCancel(){return setModalVisible(false);},destroyOnClose:true,children:/*#__PURE__*/_jsx(SearchDropdown,{query:query,setQuery:setQuery,data:sortedResults,isOverlayVisible:isOverlayVisible,setOverlayVisible:setOverlayVisible})})]}),isTablet&&/*#__PURE__*/_jsx(SearchDropdown,{query:query,setQuery:setQuery,data:sortedResults,isOverlayVisible:isOverlayVisible,setOverlayVisible:setOverlayVisible})]});};","map":{"version":3,"sources":["/workspace/lightence-ant-design-react-template/src/components/header/components/HeaderSearch/HeaderSearch.tsx"],"names":["React","useEffect","useState","useLocation","SearchDropdown","Button","components","configComponents","categoriesList","useResponsive","S","HeaderSearch","mobileOnly","isTablet","pathname","query","setQuery","isModalVisible","setModalVisible","isOverlayVisible","setOverlayVisible","sortedResults","reduce","acc","current","searchResults","filter","component","categories","includes","name","keywords","some","keyword","length","concat","category"],"mappings":"wKAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,OAASC,cAAT,KAA+B,kCAA/B,CACA,OAASC,MAAT,KAAuB,8CAAvB,CACA,OAASC,UAAU,GAAIC,CAAAA,gBAAvB,KAA0D,kCAA1D,CACA,OAASC,cAAT,KAA6C,+BAA7C,CACA,OAASC,aAAT,KAA8B,0BAA9B,CACA,MAAO,GAAKC,CAAAA,CAAZ,KAAmB,uBAAnB,C,6IAOA,MAAO,IAAMC,CAAAA,YAAsB,CAAG,QAAzBA,CAAAA,YAAyB,EAAM,CAC1C,mBAAiCF,aAAa,EAA9C,CAAQG,UAAR,gBAAQA,UAAR,CAAoBC,QAApB,gBAAoBA,QAApB,CAEA,iBAAqBV,WAAW,EAAhC,CAAQW,QAAR,cAAQA,QAAR,CAEA,cAA0BZ,QAAQ,CAAC,EAAD,CAAlC,wCAAOa,KAAP,eAAcC,QAAd,eACA,eAAqBd,QAAQ,CAAcK,gBAAd,CAA7B,yCAAOD,UAAP,eAEA,eAA0CJ,QAAQ,CAAC,KAAD,CAAlD,yCAAOe,cAAP,eAAuBC,eAAvB,eACA,eAA8ChB,QAAQ,CAAC,KAAD,CAAtD,yCAAOiB,gBAAP,eAAyBC,iBAAzB,eAEA,GAAMC,CAAAA,aAAa,CAAGN,KAAK,CACvBP,cAAc,CAACc,MAAf,CAAsB,SAACC,GAAD,CAAMC,OAAN,CAAkB,CACtC,GAAMC,CAAAA,aAAa,CAAGnB,UAAU,CAACoB,MAAX,CACpB,SAACC,SAAD,QACEA,CAAAA,SAAS,CAACC,UAAV,CAAqBC,QAArB,CAA8BL,OAAO,CAACM,IAAtC,GACAH,SAAS,CAACI,QAAV,CAAmBC,IAAnB,CAAwB,SAACC,OAAD,QAAaA,CAAAA,OAAO,CAACJ,QAAR,CAAiBd,KAAjB,CAAb,EAAxB,CAFF,EADoB,CAAtB,CAMA,MAAOU,CAAAA,aAAa,CAACS,MAAd,CAAuB,CAAvB,CAA2BX,GAAG,CAACY,MAAJ,CAAW,CAAEC,QAAQ,CAAEZ,OAAO,CAACM,IAApB,CAA0BxB,UAAU,CAAEmB,aAAtC,CAAX,CAA3B,CAA+FF,GAAtG,CACD,CARD,CAQG,EARH,CADuB,CAUvB,IAVJ,CAYAtB,SAAS,CAAC,UAAM,CACdiB,eAAe,CAAC,KAAD,CAAf,CACAE,iBAAiB,CAAC,KAAD,CAAjB,CACD,CAHQ,CAGN,CAACN,QAAD,CAHM,CAAT,CAKA,mBACE,2BACGF,UAAU,eACT,wCACE,KAAC,MAAD,EACE,IAAI,CAAEK,cAAc,CAAG,OAAH,CAAa,MADnC,CAEE,IAAI,cAAE,KAAC,CAAD,CAAG,UAAH,EAAc,OAAO,CAAE,yBAAMC,CAAAA,eAAe,CAAC,IAAD,CAArB,EAAvB,EAFR,EADF,cAKE,KAAC,CAAD,CAAG,WAAH,EACE,OAAO,CAAED,cADX,CAEE,QAAQ,CAAE,KAFZ,CAGE,MAAM,CAAE,IAHV,CAIE,QAAQ,CAAE,0BAAMC,CAAAA,eAAe,CAAC,KAAD,CAArB,EAJZ,CAKE,cAAc,KALhB,uBAOE,KAAC,cAAD,EACE,KAAK,CAAEH,KADT,CAEE,QAAQ,CAAEC,QAFZ,CAGE,IAAI,CAAEK,aAHR,CAIE,gBAAgB,CAAEF,gBAJpB,CAKE,iBAAiB,CAAEC,iBALrB,EAPF,EALF,GAFJ,CAyBGP,QAAQ,eACP,KAAC,cAAD,EACE,KAAK,CAAEE,KADT,CAEE,QAAQ,CAAEC,QAFZ,CAGE,IAAI,CAAEK,aAHR,CAIE,gBAAgB,CAAEF,gBAJpB,CAKE,iBAAiB,CAAEC,iBALrB,EA1BJ,GADF,CAqCD,CAjEM","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router';\nimport { SearchDropdown } from '../searchDropdown/SearchDropdown';\nimport { Button } from '@app/components/common/buttons/Button/Button';\nimport { components as configComponents, Component } from '@app/constants/config/components';\nimport { categoriesList, CategoryType } from '@app/constants/categoriesList';\nimport { useResponsive } from '@app/hooks/useResponsive';\nimport * as S from './HeaderSearch.styles';\n\nexport interface CategoryComponents {\n  category: CategoryType;\n  components: Component[];\n}\n\nexport const HeaderSearch: React.FC = () => {\n  const { mobileOnly, isTablet } = useResponsive();\n\n  const { pathname } = useLocation();\n\n  const [query, setQuery] = useState('');\n  const [components] = useState<Component[]>(configComponents);\n\n  const [isModalVisible, setModalVisible] = useState(false);\n  const [isOverlayVisible, setOverlayVisible] = useState(false);\n\n  const sortedResults = query\n    ? categoriesList.reduce((acc, current) => {\n        const searchResults = components.filter(\n          (component) =>\n            component.categories.includes(current.name) &&\n            component.keywords.some((keyword) => keyword.includes(query)),\n        );\n\n        return searchResults.length > 0 ? acc.concat({ category: current.name, components: searchResults }) : acc;\n      }, [] as CategoryComponents[])\n    : null;\n\n  useEffect(() => {\n    setModalVisible(false);\n    setOverlayVisible(false);\n  }, [pathname]);\n\n  return (\n    <>\n      {mobileOnly && (\n        <>\n          <Button\n            type={isModalVisible ? 'ghost' : 'text'}\n            icon={<S.SearchIcon onClick={() => setModalVisible(true)} />}\n          />\n          <S.SearchModal\n            visible={isModalVisible}\n            closable={false}\n            footer={null}\n            onCancel={() => setModalVisible(false)}\n            destroyOnClose\n          >\n            <SearchDropdown\n              query={query}\n              setQuery={setQuery}\n              data={sortedResults}\n              isOverlayVisible={isOverlayVisible}\n              setOverlayVisible={setOverlayVisible}\n            />\n          </S.SearchModal>\n        </>\n      )}\n\n      {isTablet && (\n        <SearchDropdown\n          query={query}\n          setQuery={setQuery}\n          data={sortedResults}\n          isOverlayVisible={isOverlayVisible}\n          setOverlayVisible={setOverlayVisible}\n        />\n      )}\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}