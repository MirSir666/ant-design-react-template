{"ast":null,"code":"import _slicedToArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useLocation}from'react-router';import{SearchDropdown}from'../searchDropdown/SearchDropdown';import{Button}from'@app/components/common/buttons/Button/Button';import{components as configComponents}from'@app/constants/config/components';import{categoriesList}from'@app/constants/categoriesList';import{useResponsive}from'@app/hooks/useResponsive';import*as S from'./HeaderSearch.styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var HeaderSearch=function HeaderSearch(){var _useResponsive=useResponsive(),mobileOnly=_useResponsive.mobileOnly,isTablet=_useResponsive.isTablet;var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState(configComponents),_useState4=_slicedToArray(_useState3,1),components=_useState4[0];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isModalVisible=_useState6[0],setModalVisible=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isOverlayVisible=_useState8[0],setOverlayVisible=_useState8[1];var sortedResults=query?categoriesList.reduce(function(acc,current){var searchResults=components.filter(function(component){return component.categories.includes(current.name)&&component.keywords.some(function(keyword){return keyword.includes(query);});});return searchResults.length>0?acc.concat({category:current.name,components:searchResults}):acc;},[]):null;useEffect(function(){setModalVisible(false);setOverlayVisible(false);},[pathname]);return/*#__PURE__*/_jsxs(_Fragment,{children:[mobileOnly&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{type:isModalVisible?'ghost':'text',icon:/*#__PURE__*/_jsx(S.SearchIcon,{onClick:function onClick(){return setModalVisible(true);}})}),/*#__PURE__*/_jsx(S.SearchModal,{visible:isModalVisible,closable:false,footer:null,onCancel:function onCancel(){return setModalVisible(false);},destroyOnClose:true,children:/*#__PURE__*/_jsx(SearchDropdown,{query:query,setQuery:setQuery,data:sortedResults,isOverlayVisible:isOverlayVisible,setOverlayVisible:setOverlayVisible})})]}),isTablet&&/*#__PURE__*/_jsx(SearchDropdown,{query:query,setQuery:setQuery,data:sortedResults,isOverlayVisible:isOverlayVisible,setOverlayVisible:setOverlayVisible})]});};","map":{"version":3,"names":["React","useEffect","useState","useLocation","SearchDropdown","Button","components","configComponents","categoriesList","useResponsive","S","HeaderSearch","mobileOnly","isTablet","pathname","query","setQuery","isModalVisible","setModalVisible","isOverlayVisible","setOverlayVisible","sortedResults","reduce","acc","current","searchResults","filter","component","categories","includes","name","keywords","some","keyword","length","concat","category"],"sources":["/workspace/ant-design-react-template/src/components/header/components/HeaderSearch/HeaderSearch.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router';\nimport { SearchDropdown } from '../searchDropdown/SearchDropdown';\nimport { Button } from '@app/components/common/buttons/Button/Button';\nimport { components as configComponents, Component } from '@app/constants/config/components';\nimport { categoriesList, CategoryType } from '@app/constants/categoriesList';\nimport { useResponsive } from '@app/hooks/useResponsive';\nimport * as S from './HeaderSearch.styles';\n\nexport interface CategoryComponents {\n  category: CategoryType;\n  components: Component[];\n}\n\nexport const HeaderSearch: React.FC = () => {\n  const { mobileOnly, isTablet } = useResponsive();\n\n  const { pathname } = useLocation();\n\n  const [query, setQuery] = useState('');\n  const [components] = useState<Component[]>(configComponents);\n\n  const [isModalVisible, setModalVisible] = useState(false);\n  const [isOverlayVisible, setOverlayVisible] = useState(false);\n\n  const sortedResults = query\n    ? categoriesList.reduce((acc, current) => {\n        const searchResults = components.filter(\n          (component) =>\n            component.categories.includes(current.name) &&\n            component.keywords.some((keyword) => keyword.includes(query)),\n        );\n\n        return searchResults.length > 0 ? acc.concat({ category: current.name, components: searchResults }) : acc;\n      }, [] as CategoryComponents[])\n    : null;\n\n  useEffect(() => {\n    setModalVisible(false);\n    setOverlayVisible(false);\n  }, [pathname]);\n\n  return (\n    <>\n      {mobileOnly && (\n        <>\n          <Button\n            type={isModalVisible ? 'ghost' : 'text'}\n            icon={<S.SearchIcon onClick={() => setModalVisible(true)} />}\n          />\n          <S.SearchModal\n            visible={isModalVisible}\n            closable={false}\n            footer={null}\n            onCancel={() => setModalVisible(false)}\n            destroyOnClose\n          >\n            <SearchDropdown\n              query={query}\n              setQuery={setQuery}\n              data={sortedResults}\n              isOverlayVisible={isOverlayVisible}\n              setOverlayVisible={setOverlayVisible}\n            />\n          </S.SearchModal>\n        </>\n      )}\n\n      {isTablet && (\n        <SearchDropdown\n          query={query}\n          setQuery={setQuery}\n          data={sortedResults}\n          isOverlayVisible={isOverlayVisible}\n          setOverlayVisible={setOverlayVisible}\n        />\n      )}\n    </>\n  );\n};\n"],"mappings":"0HAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,cAAc,CAC1C,OAASC,cAAc,KAAQ,kCAAkC,CACjE,OAASC,MAAM,KAAQ,8CAA8C,CACrE,OAASC,UAAU,GAAIC,iBAAgB,KAAmB,kCAAkC,CAC5F,OAASC,cAAc,KAAsB,+BAA+B,CAC5E,OAASC,aAAa,KAAQ,0BAA0B,CACxD,MAAO,GAAKC,EAAC,KAAM,uBAAuB,CAAC,6IAO3C,MAAO,IAAMC,aAAsB,CAAG,QAAzBA,aAAsB,EAAS,CAC1C,mBAAiCF,aAAa,EAAE,CAAxCG,UAAU,gBAAVA,UAAU,CAAEC,QAAQ,gBAARA,QAAQ,CAE5B,iBAAqBV,WAAW,EAAE,CAA1BW,QAAQ,cAARA,QAAQ,CAEhB,cAA0BZ,QAAQ,CAAC,EAAE,CAAC,wCAA/Ba,KAAK,eAAEC,QAAQ,eACtB,eAAqBd,QAAQ,CAAcK,gBAAgB,CAAC,yCAArDD,UAAU,eAEjB,eAA0CJ,QAAQ,CAAC,KAAK,CAAC,yCAAlDe,cAAc,eAAEC,eAAe,eACtC,eAA8ChB,QAAQ,CAAC,KAAK,CAAC,yCAAtDiB,gBAAgB,eAAEC,iBAAiB,eAE1C,GAAMC,cAAa,CAAGN,KAAK,CACvBP,cAAc,CAACc,MAAM,CAAC,SAACC,GAAG,CAAEC,OAAO,CAAK,CACtC,GAAMC,cAAa,CAAGnB,UAAU,CAACoB,MAAM,CACrC,SAACC,SAAS,QACRA,UAAS,CAACC,UAAU,CAACC,QAAQ,CAACL,OAAO,CAACM,IAAI,CAAC,EAC3CH,SAAS,CAACI,QAAQ,CAACC,IAAI,CAAC,SAACC,OAAO,QAAKA,QAAO,CAACJ,QAAQ,CAACd,KAAK,CAAC,GAAC,GAChE,CAED,MAAOU,cAAa,CAACS,MAAM,CAAG,CAAC,CAAGX,GAAG,CAACY,MAAM,CAAC,CAAEC,QAAQ,CAAEZ,OAAO,CAACM,IAAI,CAAExB,UAAU,CAAEmB,aAAc,CAAC,CAAC,CAAGF,GAAG,CAC3G,CAAC,CAAE,EAAE,CAAyB,CAC9B,IAAI,CAERtB,SAAS,CAAC,UAAM,CACdiB,eAAe,CAAC,KAAK,CAAC,CACtBE,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAC,CAAE,CAACN,QAAQ,CAAC,CAAC,CAEd,mBACE,2BACGF,UAAU,eACT,wCACE,KAAC,MAAM,EACL,IAAI,CAAEK,cAAc,CAAG,OAAO,CAAG,MAAO,CACxC,IAAI,cAAE,KAAC,CAAC,CAAC,UAAU,EAAC,OAAO,CAAE,yBAAMC,gBAAe,CAAC,IAAI,CAAC,EAAC,EAAI,EAC7D,cACF,KAAC,CAAC,CAAC,WAAW,EACZ,OAAO,CAAED,cAAe,CACxB,QAAQ,CAAE,KAAM,CAChB,MAAM,CAAE,IAAK,CACb,QAAQ,CAAE,0BAAMC,gBAAe,CAAC,KAAK,CAAC,EAAC,CACvC,cAAc,4BAEd,KAAC,cAAc,EACb,KAAK,CAAEH,KAAM,CACb,QAAQ,CAAEC,QAAS,CACnB,IAAI,CAAEK,aAAc,CACpB,gBAAgB,CAAEF,gBAAiB,CACnC,iBAAiB,CAAEC,iBAAkB,EACrC,EACY,GAEnB,CAEAP,QAAQ,eACP,KAAC,cAAc,EACb,KAAK,CAAEE,KAAM,CACb,QAAQ,CAAEC,QAAS,CACnB,IAAI,CAAEK,aAAc,CACpB,gBAAgB,CAAEF,gBAAiB,CACnC,iBAAiB,CAAEC,iBAAkB,EAExC,GACA,CAEP,CAAC"},"metadata":{},"sourceType":"module"}