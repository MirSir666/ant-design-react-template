{"ast":null,"code":"import _slicedToArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"onDelete\",\"onArchive\"];import React,{useState}from'react';import{useTranslation}from'react-i18next';import{MoreOutlined}from'@ant-design/icons';import{Dropdown}from'@app/components/common/Dropdown/Dropdown';import{Button}from'@app/components/common/buttons/Button/Button';import{ParticipantsDropdown}from'@app/components/apps/kanban/newCardForm/ParticipantsDropdown/ParticipantsDropdown';import{TagDropdown}from'@app/components/apps/kanban/newCardForm/TagDropdown/TagDropdown';import*as S from'./Card.styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditPopover=function EditPopover(_ref){var onDelete=_ref.onDelete,onArchive=_ref.onArchive,props=_objectWithoutProperties(_ref,_excluded);var _useTranslation=useTranslation(),t=_useTranslation.t;return/*#__PURE__*/_jsxs(S.CardMenu,_objectSpread(_objectSpread({selectable:false},props),{},{children:[/*#__PURE__*/_jsx(S.MenuItem,{onClick:onDelete,children:t('common.delete')},\"1\"),/*#__PURE__*/_jsx(S.MenuItem,{onClick:onArchive,children:t('kanban.archive')},\"2\")]}));};export var Card=function Card(_ref2){var style=_ref2.style,onClick=_ref2.onClick,onDelete=_ref2.onDelete,onChange=_ref2.onChange,className=_ref2.className,id=_ref2.id,title=_ref2.title,description=_ref2.description,_ref2$tags=_ref2.tags,tags=_ref2$tags===void 0?[]:_ref2$tags,_ref2$participants=_ref2.participants,participants=_ref2$participants===void 0?[]:_ref2$participants,cardDraggable=_ref2.cardDraggable,editable=_ref2.editable;var _useTranslation2=useTranslation(),t=_useTranslation2.t;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isExpanded=_useState2[0],setIsExpanded=_useState2[1];var onArrowPress=function onArrowPress(){setIsExpanded(!isExpanded);};var updateCard=function updateCard(card){onChange(_objectSpread(_objectSpread({},card),{},{id:id}));};var onDeleteCard=function onDeleteCard(){onDelete();};var updateTags=function updateTags(tags){updateCard({tags:tags});};var updateParticipants=function updateParticipants(participants){updateCard({participants:participants});};return/*#__PURE__*/_jsx(S.CardWrapper,{\"data-id\":id,onClick:onClick,style:style,className:className,children:/*#__PURE__*/_jsx(S.CollapseCard,{onChange:onArrowPress,bordered:false,defaultActiveKey:['1'],children:/*#__PURE__*/_jsxs(S.CardContent,{showArrow:false,header:/*#__PURE__*/_jsxs(S.CardHeader,{children:[/*#__PURE__*/_jsx(S.CardTitle,{draggable:cardDraggable,onClick:function onClick(e){e.stopPropagation();},children:editable?/*#__PURE__*/_jsx(S.Input,{name:\"title\",value:title,border:true,placeholder:t('kanban.title'),resize:\"vertical\",onSave:function onSave(value){return updateCard({title:value});}}):title}),/*#__PURE__*/_jsxs(S.CardRightContent,{children:[/*#__PURE__*/_jsx(Button,{noStyle:true,type:\"text\",icon:/*#__PURE__*/_jsx(S.ArrowDownIcon,{$expanded:isExpanded})}),/*#__PURE__*/_jsx(Dropdown,{overlay:/*#__PURE__*/_jsx(EditPopover,{onDelete:onDeleteCard,onArchive:onDeleteCard}),placement:\"bottomRight\",trigger:['click'],children:/*#__PURE__*/_jsx(Button,{noStyle:true,type:\"text\",icon:/*#__PURE__*/_jsx(MoreOutlined,{}),onClick:function onClick(e){e.stopPropagation();}})})]})]}),children:[/*#__PURE__*/_jsx(S.CardDetails,{children:editable?/*#__PURE__*/_jsx(S.Input,{value:description,border:true,placeholder:t('kanban.description'),resize:\"vertical\",onSave:function onSave(value){return updateCard({description:value});}}):description}),/*#__PURE__*/_jsx(S.CardFooter,{children:/*#__PURE__*/_jsx(TagDropdown,{selectedTags:tags,setSelectedTags:updateTags})}),/*#__PURE__*/_jsx(S.ParticipantsWrapper,{children:/*#__PURE__*/_jsx(ParticipantsDropdown,{selectedParticipants:participants,setSelectedParticipants:updateParticipants})})]},\"1\")})});};","map":{"version":3,"names":["React","useState","useTranslation","MoreOutlined","Dropdown","Button","ParticipantsDropdown","TagDropdown","S","EditPopover","onDelete","onArchive","props","t","Card","style","onClick","onChange","className","id","title","description","tags","participants","cardDraggable","editable","isExpanded","setIsExpanded","onArrowPress","updateCard","card","onDeleteCard","updateTags","updateParticipants","e","stopPropagation","value"],"sources":["/workspace/ant-design-react-template/src/components/apps/kanban/Card/Card.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { MoreOutlined } from '@ant-design/icons';\nimport { Dropdown } from '@app/components/common/Dropdown/Dropdown';\nimport { Button } from '@app/components/common/buttons/Button/Button';\nimport { ParticipantsDropdown } from '@app/components/apps/kanban/newCardForm/ParticipantsDropdown/ParticipantsDropdown';\nimport { TagDropdown } from '@app/components/apps/kanban/newCardForm/TagDropdown/TagDropdown';\nimport { CardState, Tag as ITag, Participant as IParticipant } from '@app/components/apps/kanban/interfaces';\nimport * as S from './Card.styles';\n\ninterface CardProps {\n  style: CSSStyleSheet;\n  onClick: () => void;\n  onDelete: () => void;\n  onChange: (card: CardState) => void;\n  className: string;\n  id: string | number;\n  title: string;\n  description: string;\n  tags: ITag[];\n  participants: IParticipant[];\n  cardDraggable: boolean;\n  editable: boolean;\n}\n\ninterface EditPopoverProps {\n  onDelete: () => void;\n  onArchive: () => void;\n}\n\nconst EditPopover: React.FC<EditPopoverProps> = ({ onDelete, onArchive, ...props }) => {\n  const { t } = useTranslation();\n\n  return (\n    <S.CardMenu selectable={false} {...props}>\n      <S.MenuItem key=\"1\" onClick={onDelete}>\n        {t('common.delete')}\n      </S.MenuItem>\n\n      <S.MenuItem key=\"2\" onClick={onArchive}>\n        {t('kanban.archive')}\n      </S.MenuItem>\n    </S.CardMenu>\n  );\n};\n\nexport const Card: React.FC<CardProps> = ({\n  style,\n  onClick,\n  onDelete,\n  onChange,\n  className,\n  id,\n  title,\n  description,\n  tags = [],\n  participants = [],\n  cardDraggable,\n  editable,\n}) => {\n  const { t } = useTranslation();\n  const [isExpanded, setIsExpanded] = useState(true);\n\n  const onArrowPress = () => {\n    setIsExpanded(!isExpanded);\n  };\n\n  const updateCard = (card: CardState) => {\n    onChange({ ...card, id });\n  };\n\n  const onDeleteCard = () => {\n    onDelete();\n  };\n\n  const updateTags = (tags: ITag[]) => {\n    updateCard({ tags });\n  };\n\n  const updateParticipants = (participants: IParticipant[]) => {\n    updateCard({ participants });\n  };\n\n  return (\n    <S.CardWrapper data-id={id} onClick={onClick} style={style} className={className}>\n      <S.CollapseCard onChange={onArrowPress} bordered={false} defaultActiveKey={['1']}>\n        <S.CardContent\n          showArrow={false}\n          key=\"1\"\n          header={\n            <S.CardHeader>\n              <S.CardTitle\n                draggable={cardDraggable}\n                onClick={(e: MouseEvent) => {\n                  e.stopPropagation();\n                }}\n              >\n                {editable ? (\n                  <S.Input\n                    name=\"title\"\n                    value={title}\n                    border\n                    placeholder={t('kanban.title')}\n                    resize=\"vertical\"\n                    onSave={(value: string) => updateCard({ title: value })}\n                  />\n                ) : (\n                  title\n                )}\n              </S.CardTitle>\n              <S.CardRightContent>\n                <Button noStyle type=\"text\" icon={<S.ArrowDownIcon $expanded={isExpanded} />} />\n                <Dropdown\n                  overlay={<EditPopover onDelete={onDeleteCard} onArchive={onDeleteCard} />}\n                  placement=\"bottomRight\"\n                  trigger={['click']}\n                >\n                  <Button\n                    noStyle\n                    type=\"text\"\n                    icon={<MoreOutlined />}\n                    onClick={(e) => {\n                      e.stopPropagation();\n                    }}\n                  />\n                </Dropdown>\n              </S.CardRightContent>\n            </S.CardHeader>\n          }\n        >\n          <S.CardDetails>\n            {editable ? (\n              <S.Input\n                value={description}\n                border\n                placeholder={t('kanban.description')}\n                resize=\"vertical\"\n                onSave={(value: string) => updateCard({ description: value })}\n              />\n            ) : (\n              description\n            )}\n          </S.CardDetails>\n          <S.CardFooter>\n            <TagDropdown selectedTags={tags} setSelectedTags={updateTags} />\n          </S.CardFooter>\n\n          <S.ParticipantsWrapper>\n            <ParticipantsDropdown selectedParticipants={participants} setSelectedParticipants={updateParticipants} />\n          </S.ParticipantsWrapper>\n        </S.CardContent>\n      </S.CollapseCard>\n    </S.CardWrapper>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}