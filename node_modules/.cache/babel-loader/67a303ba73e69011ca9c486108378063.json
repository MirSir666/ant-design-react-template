{"ast":null,"code":"import _slicedToArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useCallback}from'react';import{useNavigate,Link}from'react-router-dom';import{Image,Spin}from'antd';import{useTranslation}from'react-i18next';import{BaseForm}from'@app/components/common/forms/BaseForm/BaseForm';import{VerificationCodeInput}from'@app/components/common/VerificationCodeInput/VerificationCodeInput';import{useAppDispatch}from'@app/hooks/reduxHooks';import{doVerifySecurityCode}from'@app/store/slices/authSlice';import{notificationController}from'@app/controllers/notificationController';import VerifyEmailImage from'@app/assets/images/verify-email.webp';import*as Auth from'@app/components/layouts/AuthLayout/AuthLayout.styles';import*as S from'./SecurityCodeForm.styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var SecurityCodeForm=function SecurityCodeForm(_ref){var onBack=_ref.onBack,onFinish=_ref.onFinish;var navigate=useNavigate();var _useTranslation=useTranslation(),t=_useTranslation.t;var dispatch=useAppDispatch();var navigateBack=useCallback(function(){return navigate(-1);},[navigate]);var navigateForward=useCallback(function(){return navigate('/auth/new-password');},[navigate]);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),securityCode=_useState2[0],setSecurityCode=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setLoading=_useState4[1];useEffect(function(){if(securityCode.length===6){setLoading(true);dispatch(doVerifySecurityCode({code:securityCode})).unwrap().then(onFinish||navigateForward).catch(function(err){notificationController.error({message:err.message});setLoading(false);});}},[securityCode,navigateForward,onFinish,dispatch]);return/*#__PURE__*/_jsx(Auth.FormWrapper,{children:/*#__PURE__*/_jsxs(BaseForm,{layout:\"vertical\",requiredMark:\"optional\",children:[/*#__PURE__*/_jsxs(Auth.BackWrapper,{onClick:onBack||navigateBack,children:[/*#__PURE__*/_jsx(Auth.BackIcon,{}),t('common.back')]}),/*#__PURE__*/_jsxs(S.ContentWrapper,{children:[/*#__PURE__*/_jsx(S.ImageWrapper,{children:/*#__PURE__*/_jsx(Image,{src:VerifyEmailImage,alt:\"Not found\",preview:false})}),/*#__PURE__*/_jsx(Auth.FormTitle,{children:t('securityCodeForm.title')}),/*#__PURE__*/_jsx(S.VerifyEmailDescription,{children:t('common.verifCodeSent')}),isLoading?/*#__PURE__*/_jsx(Spin,{}):/*#__PURE__*/_jsx(VerificationCodeInput,{autoFocus:true,onChange:setSecurityCode}),/*#__PURE__*/_jsx(Link,{to:\"/\",target:\"_blank\",children:/*#__PURE__*/_jsx(S.NoCodeText,{children:t('securityCodeForm.noCode')})})]})]})});};","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","Link","Image","Spin","useTranslation","BaseForm","VerificationCodeInput","useAppDispatch","doVerifySecurityCode","notificationController","VerifyEmailImage","Auth","S","SecurityCodeForm","onBack","onFinish","navigate","t","dispatch","navigateBack","navigateForward","securityCode","setSecurityCode","isLoading","setLoading","length","code","unwrap","then","catch","err","error","message"],"sources":["/workspace/ant-design-react-template/src/components/auth/SecurityCodeForm/SecurityCodeForm.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { Image, Spin } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { BaseForm } from '@app/components/common/forms/BaseForm/BaseForm';\nimport { VerificationCodeInput } from '@app/components/common/VerificationCodeInput/VerificationCodeInput';\nimport { useAppDispatch } from '@app/hooks/reduxHooks';\nimport { doVerifySecurityCode } from '@app/store/slices/authSlice';\nimport { notificationController } from '@app/controllers/notificationController';\nimport VerifyEmailImage from '@app/assets/images/verify-email.webp';\nimport * as Auth from '@app/components/layouts/AuthLayout/AuthLayout.styles';\nimport * as S from './SecurityCodeForm.styles';\n\ninterface SecurityCodeFormProps {\n  onBack?: () => void;\n  onFinish?: () => void;\n}\n\nexport const SecurityCodeForm: React.FC<SecurityCodeFormProps> = ({ onBack, onFinish }) => {\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n  const dispatch = useAppDispatch();\n\n  const navigateBack = useCallback(() => navigate(-1), [navigate]);\n  const navigateForward = useCallback(() => navigate('/auth/new-password'), [navigate]);\n\n  const [securityCode, setSecurityCode] = useState('');\n  const [isLoading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (securityCode.length === 6) {\n      setLoading(true);\n      dispatch(doVerifySecurityCode({ code: securityCode }))\n        .unwrap()\n        .then(onFinish || navigateForward)\n        .catch((err) => {\n          notificationController.error({ message: err.message });\n          setLoading(false);\n        });\n    }\n  }, [securityCode, navigateForward, onFinish, dispatch]);\n\n  return (\n    <Auth.FormWrapper>\n      <BaseForm layout=\"vertical\" requiredMark=\"optional\">\n        <Auth.BackWrapper onClick={onBack || navigateBack}>\n          <Auth.BackIcon />\n          {t('common.back')}\n        </Auth.BackWrapper>\n        <S.ContentWrapper>\n          <S.ImageWrapper>\n            <Image src={VerifyEmailImage} alt=\"Not found\" preview={false} />\n          </S.ImageWrapper>\n          <Auth.FormTitle>{t('securityCodeForm.title')}</Auth.FormTitle>\n          <S.VerifyEmailDescription>{t('common.verifCodeSent')}</S.VerifyEmailDescription>\n          {isLoading ? <Spin /> : <VerificationCodeInput autoFocus onChange={setSecurityCode} />}\n          <Link to=\"/\" target=\"_blank\">\n            <S.NoCodeText>{t('securityCodeForm.noCode')}</S.NoCodeText>\n          </Link>\n        </S.ContentWrapper>\n      </BaseForm>\n    </Auth.FormWrapper>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}