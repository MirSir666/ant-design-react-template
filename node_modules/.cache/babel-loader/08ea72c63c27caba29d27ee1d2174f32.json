{"ast":null,"code":"import _slicedToArray from\"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useMemo,useState}from'react';import{Col,Row}from'antd';import{useTranslation}from'react-i18next';import{CaretDownOutlined,CaretUpOutlined}from'@ant-design/icons';import{NFTCard}from'@app/components/nft-dashboard/common/NFTCard/NFTCard';import{TotalEarningChart}from'@app/components/nft-dashboard/totalEarning/TotalEarningChart/TotalEarningChart';import{useAppSelector}from'@app/hooks/reduxHooks';import{getTotalEarning}from'@app/api/earnings.api';import{Dates}from'@app/constants/Dates';import{formatNumberWithCommas,getCurrencyPrice,getDifference}from'@app/utils/utils';import*as S from'./TotalEarning.styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var TotalEarning=function TotalEarning(){var _totalEarning$total;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),totalEarning=_useState2[0],setTotalEarning=_useState2[1];var userId=useAppSelector(function(state){var _state$user$user;return(_state$user$user=state.user.user)===null||_state$user$user===void 0?void 0:_state$user$user.id;});var _useTranslation=useTranslation(),t=_useTranslation.t;useEffect(function(){userId&&getTotalEarning(userId,'USD').then(function(res){return setTotalEarning(res);});},[userId]);var _useMemo=useMemo(function(){return{totalEarningData:{data:totalEarning?totalEarning.timeline.map(function(item){return item.usd_value;}):[]},days:totalEarning?totalEarning.timeline.map(function(item){return Dates.getDate(item.date).format('L');}):[]};},[totalEarning]),totalEarningData=_useMemo.totalEarningData,days=_useMemo.days;var isIncreased=Number(totalEarning===null||totalEarning===void 0?void 0:totalEarning.total)>Number(totalEarning===null||totalEarning===void 0?void 0:totalEarning.prevTotal);return/*#__PURE__*/_jsx(NFTCard,{isSider:true,children:/*#__PURE__*/_jsxs(Row,{gutter:[14,14],children:[/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsxs(Row,{wrap:false,justify:\"space-between\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(S.Title,{level:2,children:t('nft.totalEarning')})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(S.ValueText,{$color:isIncreased?'success':'error',children:[isIncreased?/*#__PURE__*/_jsx(CaretUpOutlined,{}):/*#__PURE__*/_jsx(CaretDownOutlined,{}),' ',totalEarning&&getDifference(totalEarning===null||totalEarning===void 0?void 0:totalEarning.total,totalEarning===null||totalEarning===void 0?void 0:totalEarning.prevTotal)]})})]})}),/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsxs(Row,{wrap:false,justify:\"space-between\",gutter:[20,20],children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(S.Text,{children:getCurrencyPrice(formatNumberWithCommas((_totalEarning$total=totalEarning===null||totalEarning===void 0?void 0:totalEarning.total)!==null&&_totalEarning$total!==void 0?_totalEarning$total:0),'USD')})}),/*#__PURE__*/_jsx(Col,{flex:1,children:/*#__PURE__*/_jsx(TotalEarningChart,{xAxisData:days,earningData:totalEarningData})})]})})]})});};","map":{"version":3,"names":["React","useEffect","useMemo","useState","Col","Row","useTranslation","CaretDownOutlined","CaretUpOutlined","NFTCard","TotalEarningChart","useAppSelector","getTotalEarning","Dates","formatNumberWithCommas","getCurrencyPrice","getDifference","S","TotalEarning","totalEarning","setTotalEarning","userId","state","user","id","t","then","res","totalEarningData","data","timeline","map","item","usd_value","days","getDate","date","format","isIncreased","Number","total","prevTotal"],"sources":["/workspace/ant-design-react-template/src/components/nft-dashboard/totalEarning/TotalEarning.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { Col, Row } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { CaretDownOutlined, CaretUpOutlined } from '@ant-design/icons';\nimport { NFTCard } from '@app/components/nft-dashboard/common/NFTCard/NFTCard';\nimport { TotalEarningChart } from '@app/components/nft-dashboard/totalEarning/TotalEarningChart/TotalEarningChart';\nimport { useAppSelector } from '@app/hooks/reduxHooks';\nimport { getTotalEarning, TotalEarning as ITotalEarning } from '@app/api/earnings.api';\nimport { Dates } from '@app/constants/Dates';\nimport { formatNumberWithCommas, getCurrencyPrice, getDifference } from '@app/utils/utils';\nimport * as S from './TotalEarning.styles';\n\nexport const TotalEarning: React.FC = () => {\n  const [totalEarning, setTotalEarning] = useState<ITotalEarning | null>(null);\n\n  const userId = useAppSelector((state) => state.user.user?.id);\n\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    userId && getTotalEarning(userId, 'USD').then((res) => setTotalEarning(res));\n  }, [userId]);\n\n  const { totalEarningData, days } = useMemo(\n    () => ({\n      totalEarningData: {\n        data: totalEarning ? totalEarning.timeline.map((item) => item.usd_value) : [],\n      },\n      days: totalEarning ? totalEarning.timeline.map((item) => Dates.getDate(item.date).format('L')) : [],\n    }),\n    [totalEarning],\n  );\n\n  const isIncreased = Number(totalEarning?.total) > Number(totalEarning?.prevTotal);\n\n  return (\n    <NFTCard isSider>\n      <Row gutter={[14, 14]}>\n        <Col span={24}>\n          <Row wrap={false} justify=\"space-between\">\n            <Col>\n              <S.Title level={2}>{t('nft.totalEarning')}</S.Title>\n            </Col>\n\n            <Col>\n              <S.ValueText $color={isIncreased ? 'success' : 'error'}>\n                {isIncreased ? <CaretUpOutlined /> : <CaretDownOutlined />}{' '}\n                {totalEarning && getDifference(totalEarning?.total, totalEarning?.prevTotal)}\n              </S.ValueText>\n            </Col>\n          </Row>\n        </Col>\n\n        <Col span={24}>\n          <Row wrap={false} justify=\"space-between\" gutter={[20, 20]}>\n            <Col>\n              <S.Text>{getCurrencyPrice(formatNumberWithCommas(totalEarning?.total ?? 0), 'USD')}</S.Text>\n            </Col>\n\n            <Col flex={1}>\n              <TotalEarningChart xAxisData={days} earningData={totalEarningData} />\n            </Col>\n          </Row>\n        </Col>\n      </Row>\n    </NFTCard>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}