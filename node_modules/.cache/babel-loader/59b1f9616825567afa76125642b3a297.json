{"ast":null,"code":"import _objectSpread from \"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"/workspace/ant-design-react-template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/workspace/ant-design-react-template/src/components/tables/TreeTable/TreeTable.tsx\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Table } from 'components/common/Table/Table';\nimport { getTreeTableData } from 'api/table.api';\nimport { useTranslation } from 'react-i18next';\nimport { useMounted } from '@app/hooks/useMounted';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar initialPagination = {\n  current: 1,\n  pageSize: 4\n};\nexport var TreeTable = function TreeTable() {\n  _s();\n  var _useState = useState({\n      data: [],\n      pagination: initialPagination,\n      loading: false\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    tableData = _useState2[0],\n    setTableData = _useState2[1];\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var _useMounted = useMounted(),\n    isMounted = _useMounted.isMounted;\n  var fetch = useCallback(function (pagination) {\n    setTableData(function (tableData) {\n      return _objectSpread(_objectSpread({}, tableData), {}, {\n        loading: true\n      });\n    });\n    getTreeTableData(pagination).then(function (res) {\n      if (isMounted.current) {\n        setTableData({\n          data: res.data,\n          pagination: res.pagination,\n          loading: false\n        });\n      }\n    });\n  }, [isMounted]);\n  useEffect(function () {\n    fetch(initialPagination);\n  }, [fetch]);\n  var handleTableChange = function handleTableChange(pagination) {\n    fetch(pagination);\n  };\n  var rowSelection = {\n    onChange: function onChange(selectedRowKeys, selectedRows) {\n      console.log(selectedRowKeys, selectedRows);\n    },\n    onSelect: function onSelect(record, selected, selectedRows) {\n      console.log(record, selected, selectedRows);\n    },\n    onSelectAll: function onSelectAll(selected, selectedRows) {\n      console.log(selected, selectedRows);\n    }\n  };\n  var columns = [{\n    title: t('common.name'),\n    dataIndex: 'name',\n    key: 'name'\n  }, {\n    title: t('common.age'),\n    dataIndex: 'age',\n    key: 'age',\n    width: '12%'\n  }, {\n    title: t('common.address'),\n    dataIndex: 'address',\n    width: '30%',\n    key: 'address'\n  }];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Table, {\n      columns: columns,\n      dataSource: tableData.data,\n      rowSelection: _objectSpread({}, rowSelection),\n      pagination: tableData.pagination,\n      loading: tableData.loading,\n      onChange: handleTableChange,\n      scroll: {\n        x: 800\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false);\n};\n_s(TreeTable, \"pN2AzRVj8c46k2h3oV10hjKaEeQ=\", false, function () {\n  return [useTranslation, useMounted];\n});\n_c = TreeTable;\nvar _c;\n$RefreshReg$(_c, \"TreeTable\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Table","getTreeTableData","useTranslation","useMounted","initialPagination","current","pageSize","TreeTable","data","pagination","loading","tableData","setTableData","t","isMounted","fetch","then","res","handleTableChange","rowSelection","onChange","selectedRowKeys","selectedRows","console","log","onSelect","record","selected","onSelectAll","columns","title","dataIndex","key","width","x"],"sources":["/workspace/ant-design-react-template/src/components/tables/TreeTable/TreeTable.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Table } from 'components/common/Table/Table';\nimport { TablePaginationConfig } from 'antd';\nimport { Key, DefaultRecordType } from 'rc-table/lib/interface';\nimport { TreeTableRow, Pagination, getTreeTableData } from 'api/table.api';\nimport { useTranslation } from 'react-i18next';\nimport { useMounted } from '@app/hooks/useMounted';\n\nconst initialPagination: Pagination = {\n  current: 1,\n  pageSize: 4,\n};\n\nexport const TreeTable: React.FC = () => {\n  const [tableData, setTableData] = useState<{ data: TreeTableRow[]; pagination: Pagination; loading: boolean }>({\n    data: [],\n    pagination: initialPagination,\n    loading: false,\n  });\n  const { t } = useTranslation();\n  const { isMounted } = useMounted();\n\n  const fetch = useCallback(\n    (pagination: Pagination) => {\n      setTableData((tableData) => ({ ...tableData, loading: true }));\n      getTreeTableData(pagination).then((res) => {\n        if (isMounted.current) {\n          setTableData({ data: res.data, pagination: res.pagination, loading: false });\n        }\n      });\n    },\n    [isMounted],\n  );\n\n  useEffect(() => {\n    fetch(initialPagination);\n  }, [fetch]);\n\n  const handleTableChange = (pagination: TablePaginationConfig) => {\n    fetch(pagination);\n  };\n\n  const rowSelection = {\n    onChange: (selectedRowKeys: Key[], selectedRows: DefaultRecordType[]) => {\n      console.log(selectedRowKeys, selectedRows);\n    },\n    onSelect: (record: DefaultRecordType, selected: boolean, selectedRows: DefaultRecordType[]) => {\n      console.log(record, selected, selectedRows);\n    },\n    onSelectAll: (selected: boolean, selectedRows: DefaultRecordType[]) => {\n      console.log(selected, selectedRows);\n    },\n  };\n\n  const columns = [\n    {\n      title: t('common.name'),\n      dataIndex: 'name',\n      key: 'name',\n    },\n    {\n      title: t('common.age'),\n      dataIndex: 'age',\n      key: 'age',\n      width: '12%',\n    },\n    {\n      title: t('common.address'),\n      dataIndex: 'address',\n      width: '30%',\n      key: 'address',\n    },\n  ];\n\n  return (\n    <>\n      <Table\n        columns={columns}\n        dataSource={tableData.data}\n        rowSelection={{ ...rowSelection }}\n        pagination={tableData.pagination}\n        loading={tableData.loading}\n        onChange={handleTableChange}\n        scroll={{ x: 800 }}\n      />\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}